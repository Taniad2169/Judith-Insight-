<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WebSwan Services - Digital Marketing Solutions</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon.png">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#14395d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WebSwan">
    <meta name="description" content="WebSwan Services - Digital Marketing, Web Design, and Advertising Solutions">
    <meta name="application-name" content="WebSwan">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ============================================
           FIX #1: ROOT LEVEL OVERFLOW CONTROL
           This is the PRIMARY fix for the left-right bounce.
           Prevents ANY horizontal scroll on the entire page.
        ============================================ */
        html, body {
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
            margin: 0;
            padding: 0;
            position: relative;
            /* Prevent iOS overscroll bounce on horizontal axis */
            overscroll-behavior-x: none;
        }

        /* ============================================
           PWA INSTALL BANNER STYLES
        ============================================ */

        /* Android / Desktop install banner */
        #pwa-install-banner {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 999999;
            background: linear-gradient(135deg, #14395d, #38b9c9);
            color: white;
            padding: 14px 20px;
            box-shadow: 0 -4px 20px rgba(20, 57, 93, 0.4);
            animation: slideUpBanner 0.4s ease;
            box-sizing: border-box;
        }

        #pwa-install-banner.show {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
        }

        @keyframes slideUpBanner {
            from { transform: translateY(100%); opacity: 0; }
            to   { transform: translateY(0);   opacity: 1; }
        }

        .pwa-banner-left {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
            min-width: 0;
        }

        .pwa-banner-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 1.6rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .pwa-banner-text strong {
            display: block;
            font-size: 1rem;
            font-weight: 700;
            letter-spacing: 0.3px;
        }

        .pwa-banner-text span {
            font-size: 0.82rem;
            opacity: 0.88;
        }

        .pwa-banner-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-shrink: 0;
        }

        #pwa-install-btn {
            background: white;
            color: #14395d;
            border: none;
            padding: 10px 22px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            white-space: nowrap;
        }

        #pwa-install-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            background: #f0fbff;
        }

        #pwa-dismiss-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.5);
            padding: 9px 16px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        #pwa-dismiss-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* iOS install instructions modal */
        #ios-install-modal {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 999999;
            background: white;
            border-radius: 24px 24px 0 0;
            padding: 24px 24px 36px 24px;
            box-shadow: 0 -8px 40px rgba(20, 57, 93, 0.3);
            animation: slideUpModal 0.4s ease;
            box-sizing: border-box;
            max-width: 600px;
            margin: 0 auto;
        }

        #ios-install-modal.show {
            display: block;
        }

        @keyframes slideUpModal {
            from { transform: translateY(100%); }
            to   { transform: translateY(0); }
        }

        #ios-modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(20, 57, 93, 0.5);
            z-index: 999998;
            backdrop-filter: blur(3px);
        }

        #ios-modal-overlay.show {
            display: block;
        }

        .ios-modal-handle {
            width: 40px;
            height: 5px;
            background: #ddd;
            border-radius: 3px;
            margin: 0 auto 18px auto;
        }

        .ios-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .ios-modal-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #14395d;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ios-modal-title .app-icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            background: linear-gradient(135deg, #14395d, #38b9c9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
        }

        #ios-close-btn {
            background: #f0f0f0;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            flex-shrink: 0;
        }

        .ios-steps {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .ios-steps li {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 14px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.95rem;
            color: #333;
            line-height: 1.4;
        }

        .ios-steps li:last-child {
            border-bottom: none;
        }

        .ios-step-num {
            background: linear-gradient(135deg, #14395d, #38b9c9);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .ios-step-icon {
            font-size: 1.3rem;
            flex-shrink: 0;
            margin-top: 1px;
        }

        /* iOS arrow hint at bottom */
        .ios-arrow-hint {
            margin-top: 18px;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 12px;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.88rem;
            color: #0d47a1;
            font-weight: 600;
        }

        .ios-arrow-hint i {
            font-size: 1.2rem;
            color: #2196f3;
        }

        /* Small floating install button (after banner dismissed) */
        #pwa-fab {
            display: none;
            position: fixed;
            bottom: 24px;
            right: 20px;
            z-index: 99998;
            background: linear-gradient(135deg, #14395d, #38b9c9);
            color: white;
            border: none;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            font-size: 1.4rem;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(20, 57, 93, 0.5);
            transition: all 0.3s;
            animation: pulse 2.5s infinite;
            align-items: center;
            justify-content: center;
        }

        #pwa-fab.show {
            display: flex;
        }

        #pwa-fab:hover {
            transform: scale(1.1);
        }

        /* Push page content up so banner doesn't cover bottom */
        body.pwa-banner-open {
            padding-bottom: 80px;
        }

        @media (max-width: 480px) {
            #pwa-install-banner.show {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .pwa-banner-buttons {
                width: 100%;
                justify-content: flex-end;
            }
            #ios-install-modal {
                padding: 20px 18px 32px 18px;
            }
        }

        /* SCOPED STYLES - Only affects elements inside .webs-container */
        .webs-container,
        .webs-container * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .webs-container {
            background: linear-gradient(135deg, #14395d, #38b9c9, #14395d);
            padding: 0;
            margin: 0;
            min-height: 100vh;
            width: 100%;
            /* FIX #2: Clip overflowing animations and child elements */
            overflow-x: hidden;
            position: relative;
        }
        
        .webs-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                circle at center,
                #38b9c9 0%,
                #14395d 50%,
                #14395d 100%
            );
            opacity: 0.4;
            animation: spotlightMove 15s ease-in-out infinite;
            z-index: 0;
            pointer-events: none;
            /* FIX #3: Contain the pseudo-element so it doesn't cause scroll */
            will-change: transform;
        }

        .webs-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                135deg,
                transparent 0%,
                rgba(56, 185, 201, 0.1) 50%,
                transparent 100%
            );
            animation: lightSweep 8s ease-in-out infinite;
            z-index: 0;
            pointer-events: none;
            /* FIX #4: Keep light sweep contained */
            overflow: hidden;
        }

        @keyframes spotlightMove {
            0%, 100% {
                transform: translate(0, 0) scale(1);
            }
            33% {
                transform: translate(5%, 5%) scale(1.1);
            }
            66% {
                transform: translate(-5%, -5%) scale(0.9);
            }
        }

        @keyframes lightSweep {
            0%, 100% {
                opacity: 0.3;
                /* FIX #5: Replace translateX with clipped values to avoid overflow */
                transform: translateX(-20%) rotate(0deg);
            }
            50% {
                opacity: 0.6;
                transform: translateX(20%) rotate(5deg);
            }
        }
        
        .webs-container html {
            scroll-behavior: smooth;
        }
        
        /* Language Switcher */
        .webs-container .language-switcher {
            position: relative;
            z-index: 100;
            display: flex;
            justify-content: flex-end;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .webs-container .lang-select {
            padding: 8px 15px;
            border-radius: 25px;
            border: 2px solid #38b9c9;
            background: white;
            color: #14395d;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            outline: none;
            min-width: 180px;
        }
        
        .webs-container .lang-select:hover {
            background: #f0f8ff;
            border-color: #14395d;
        }
        
        /* Main container */
        .webs-container .form-container {
            max-width: 1200px;
            width: 100%;
            background-color: white;
            border-radius: 0;
            /* FIX #6: CRITICAL — clip the 200%-wide form-wrapper so it
               never causes the page to be wider than the viewport */
            overflow: hidden;
            margin: 0 auto;
            box-shadow: 0 15px 30px rgba(20, 57, 93, 0.3);
            border: 0;
            position: relative;
            z-index: 10;
        }
        
        /* FIX #7: Inner sliding wrapper — ensure it cannot scroll the page */
        .webs-container .form-wrapper {
            display: flex;
            transition: transform 0.5s ease;
            /* Prevent this wide element from triggering page scroll */
            will-change: transform;
        }
        
        /* Each panel */
        .webs-container .form-panel {
            width: 100%;
            padding: 20px;
            min-height: 600px;
            flex-shrink: 0;
            /* FIX #8: Prevent content inside panels from overflowing */
            overflow-x: hidden;
            /* Ensure panels don't exceed their allocated width */
            max-width: 100%;
        }
        
        .webs-container .header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(90deg, #14395d, #38b9c9, #14395d);
            color: white;
            position: relative;
            overflow: hidden;
            flex-wrap: wrap;
        }
        
        .webs-container .header h1 {
            font-size: 1.8rem;
            text-align: center;
            margin-right: 10px;
            z-index: 2;
            text-shadow: 2px 2px 4px rgba(20, 57, 93, 0.3);
        }
        
        /* Animated emojis container */
        .webs-container .emoji-container {
            position: relative;
            width: 140px;
            height: 60px;
            margin-left: 10px;
            z-index: 1;
            flex-shrink: 0;
        }
        
        .webs-container .emoji {
            position: absolute;
            font-size: 2.5rem;
            opacity: 0;
            transform: scale(0.3);
            animation-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
            left: 50%;
            top: 50%;
            margin-left: -25px;
            margin-top: -25px;
        }
        
        .webs-container .emoji:nth-child(1) { animation: emojiSequence 16s infinite; }
        .webs-container .emoji:nth-child(2) { animation: emojiSequence 16s infinite; animation-delay: 2s; }
        .webs-container .emoji:nth-child(3) { animation: emojiSequence 16s infinite; animation-delay: 4s; }
        .webs-container .emoji:nth-child(4) { animation: emojiSequence 16s infinite; animation-delay: 6s; }
        .webs-container .emoji:nth-child(5) { animation: emojiSequence 16s infinite; animation-delay: 8s; }
        .webs-container .emoji:nth-child(6) { animation: emojiSequence 16s infinite; animation-delay: 10s; }
        .webs-container .emoji:nth-child(7) { animation: emojiSequence 16s infinite; animation-delay: 12s; }
        .webs-container .emoji:nth-child(8) { animation: emojiSequence 16s infinite; animation-delay: 14s; }
        
        @keyframes emojiSequence {
            0%, 12.5% {
                opacity: 0;
                transform: scale(0.3) translateX(-100px) translateY(-100px);
            }
            3.125%, 9.375% {
                opacity: 1;
                transform: scale(1.2) translateX(0) translateY(0);
            }
            12.5% {
                opacity: 0;
                transform: scale(0.3) translateX(100px) translateY(100px);
            }
            100% {
                opacity: 0;
                transform: scale(0.3) translateX(100px) translateY(100px);
            }
        }
        
        .webs-container .panel-title {
            color: #14395d;
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid;
            border-image: linear-gradient(90deg, #14395d, #38b9c9, #14395d) 1;
        }
        
        /* Instruction Banner */
        .webs-container .instruction-banner {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left: 6px solid #2196f3;
            padding: 20px;
            margin: 15px 0 25px 0;
            border-radius: 16px;
            font-weight: 600;
            color: #0d47a1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.2);
        }
        
        .webs-container .instruction-banner .instruction-row {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .webs-container .instruction-banner .instruction-icon {
            font-size: 2rem;
            color: #2196f3;
            background: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .webs-container .instruction-banner .instruction-text {
            flex: 1;
            font-size: 1.1rem;
            line-height: 1.4;
            min-width: 0; /* FIX #9: Allow flex children to shrink below content size */
        }
        
        .webs-container .instruction-banner .instruction-btn {
            background: linear-gradient(45deg, #2196f3, #1976d2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
            border: 2px solid white;
            white-space: nowrap;
        }
        
        .webs-container .instruction-banner .instruction-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.4);
            background: linear-gradient(45deg, #1976d2, #0d47a1);
        }
        
        .webs-container .instruction-banner .instruction-btn i {
            font-size: 1.2rem;
        }
        
        .webs-container .instruction-banner .btn-or {
            color: #0d47a1;
            font-weight: 700;
            font-size: 1.1rem;
            background: rgba(255,255,255,0.5);
            padding: 5px 15px;
            border-radius: 30px;
        }
        
        /* Pricing Info Banner */
        .webs-container .pricing-banner {
            background: rgba(56, 185, 201, 0.1);
            border-left: 4px solid #38b9c9;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-size: 0.95rem;
            position: relative;
        }
        
        .webs-container .pricing-banner a {
            color: #14395d;
            font-weight: 700;
            text-decoration: underline;
        }
        
        .webs-container .pricing-banner a:hover {
            color: #38b9c9;
        }
        
        .webs-container .waiver-notice {
            background: #d4edda;
            color: #155724;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 600;
            border-left: 4px solid #28a745;
        }
        
        /* Calendar Styles */
        .webs-container .calendar-container { margin-bottom: 25px; }
        .webs-container .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .webs-container .calendar-header button {
            background: linear-gradient(45deg, #14395d, #38b9c9);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.3s;
        }
        .webs-container .calendar-header button:hover {
            transform: scale(1.05);
            background: linear-gradient(45deg, #38b9c9, #14395d);
        }
        .webs-container .calendar-header h3 {
            font-size: 1.1rem;
            color: #14395d;
        }
        .webs-container .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-bottom: 15px;
        }
        .webs-container .calendar-day {
            padding: 8px 4px;
            text-align: center;
            font-weight: bold;
            color: #14395d;
            background-color: rgba(56, 185, 201, 0.1);
            border-radius: 5px;
            font-size: 0.75rem;
        }
        .webs-container .calendar-date {
            padding: 10px 4px;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            background-color: #f5f5f5;
            border: 2px solid transparent;
            font-size: 0.9rem;
        }
        .webs-container .calendar-date:hover {
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            transform: scale(1.05);
            border: 2px solid #14395d;
        }
        .webs-container .calendar-date.selected {
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(20, 57, 93, 0.5);
        }
        .webs-container .calendar-date.disabled {
            background-color: #e0e0e0;
            color: #999;
            cursor: not-allowed;
            pointer-events: none;
            text-decoration: line-through;
        }
        
        /* Time slot selection */
        .webs-container .time-slots-container {
            margin-top: 20px;
            margin-bottom: 20px;
            display: none;
            scroll-margin-top: 10px;
        }
        .webs-container .time-slots-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 10px;
        }
        .webs-container .time-slot {
            padding: 12px 8px;
            text-align: center;
            background-color: #f5f5f5;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            font-size: 0.9rem;
        }
        .webs-container .time-slot:hover {
            background-color: rgba(56, 185, 201, 0.1);
            border-color: #14395d;
        }
        .webs-container .time-slot.selected {
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            font-weight: bold;
        }
        .webs-container .time-slot.disabled {
            background-color: #e0e0e0;
            color: #999;
            cursor: not-allowed;
            pointer-events: none;
            text-decoration: line-through;
        }
        
        /* Form Elements */
        .webs-container .form-group { margin-bottom: 18px; }
        .webs-container .form-label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600; 
            color: #14395d;
            font-size: 0.95rem;
        }
        .webs-container .form-input,
        .webs-container .form-select,
        .webs-container .form-textarea {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: 3px solid #ddd;
            font-size: 15px;
            transition: all 0.3s;
            background: white;
            /* FIX #10: Prevent inputs from overflowing their container */
            max-width: 100%;
            box-sizing: border-box;
        }
        .webs-container .form-input:focus,
        .webs-container .form-select:focus,
        .webs-container .form-textarea:focus {
            outline: none;
            border-color: #38b9c9;
            box-shadow: 0 0 0 3px rgba(56, 185, 201, 0.2);
        }
        .webs-container .form-textarea { min-height: 100px; resize: none; }
        
        /* Insurance subcategory dropdown */
        .webs-container .insurance-subcategory {
            display: none;
            margin-top: 15px;
        }
        .webs-container .insurance-subcategory.show {
            display: block;
        }
        
        .webs-container .selected-date-display { 
            background: linear-gradient(90deg, #14395d, #38b9c9); 
            color: white; 
            padding: 12px; 
            border-radius: 10px; 
            text-align: center; 
            margin-bottom: 20px; 
            font-weight: bold; 
            display: none;
            font-size: 0.95rem;
            /* FIX #11: Prevent date display from overflowing */
            overflow-wrap: break-word;
            word-wrap: break-word;
        }
        
        /* Call Now Button */
        .webs-container .call-btn {
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            border: none;
            padding: 16px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(20, 57, 93, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            text-decoration: none;
            text-align: center;
            box-sizing: border-box;
        }
        
        .webs-container .call-btn:hover { 
            transform: translateY(-3px); 
            background: linear-gradient(45deg, #38b9c9, #14395d);
            box-shadow: 0 8px 20px rgba(20, 57, 93, 0.6);
        }
        
        /* Footer Copy Link Section */
        .webs-container .footer-copy-section {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin: 25px 0 15px 0;
            border: 2px solid #38b9c9;
            box-shadow: 0 8px 20px rgba(20, 57, 93, 0.15);
            /* FIX #12: Ensure this section doesn't overflow */
            overflow: hidden;
        }
        
        .webs-container .footer-copy-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #14395d;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid #38b9c9;
            padding-bottom: 10px;
        }
        
        .webs-container .footer-copy-title i {
            color: #38b9c9;
            font-size: 1.5rem;
        }
        
        .webs-container .footer-copy-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin-bottom: 12px;
            background: linear-gradient(145deg, #f8faff, #ffffff);
            border-radius: 12px;
            border-left: 6px solid #38b9c9;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            /* FIX #13: Prevent items from stretching beyond container */
            min-width: 0;
            overflow: hidden;
        }
        
        .webs-container .footer-copy-item:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 16px rgba(56, 185, 201, 0.2);
        }
        
        .webs-container .footer-link-info {
            display: flex;
            flex-direction: column;
            flex: 1;
            /* FIX #14: Allow text to wrap/truncate instead of pushing width */
            min-width: 0;
            overflow: hidden;
        }
        
        .webs-container .footer-link-title {
            font-weight: 700;
            color: #14395d;
            font-size: 1.2rem;
            margin-bottom: 6px;
            letter-spacing: -0.3px;
        }
        
        .webs-container .footer-link-url {
            color: #38b9c9;
            font-size: 0.9rem;
            /* FIX #15: Comprehensive text overflow handling for long URLs */
            word-break: break-all;
            overflow-wrap: break-word;
            word-wrap: break-word;
            white-space: normal;
            max-width: 100%;
        }
        
        .webs-container .footer-copy-btn {
            background: linear-gradient(45deg, #38b9c9, #14395d);
            color: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(20, 57, 93, 0.3);
            margin-left: 20px;
            flex-shrink: 0;
            font-size: 1.3rem;
        }
        
        .webs-container .footer-copy-btn:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 16px rgba(56, 185, 201, 0.5);
        }
        
        .webs-container .footer-copy-btn.copied {
            background: linear-gradient(45deg, #28a745, #20c997);
            transform: scale(1.1);
        }
        
        .webs-container .footer-copy-btn i {
            font-size: 1.3rem;
        }
        
        /* State Compliance Search Section */
        .webs-container .state-compliance-section {
            background: linear-gradient(145deg, #f0f7ff, #e3f2fd);
            border-radius: 16px;
            padding: 20px;
            margin: 25px 0 15px 0;
            border: 2px solid #2196f3;
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.2);
            /* FIX #16: Clip internal overflow */
            overflow: hidden;
        }
        
        .webs-container .state-compliance-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #0d47a1;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid #2196f3;
            padding-bottom: 10px;
        }
        
        .webs-container .state-compliance-title i {
            color: #2196f3;
            font-size: 1.5rem;
        }
        
        .webs-container .state-search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .webs-container .state-input {
            flex: 2;
            min-width: 0; /* FIX #17: Allow input to shrink properly */
            padding: 15px;
            border: 2px solid #2196f3;
            border-radius: 12px;
            font-size: 1rem;
            background: white;
            transition: all 0.3s;
            /* FIX #18: Prevent input overflow */
            max-width: 100%;
            box-sizing: border-box;
        }
        
        .webs-container .state-input:focus {
            outline: none;
            border-color: #0d47a1;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }
        
        .webs-container .state-input::placeholder {
            color: #999;
            font-style: italic;
            /* FIX #19: Shrink placeholder text on small screens */
            font-size: 0.9rem;
        }
        
        .webs-container .state-search-btn {
            flex: 1;
            background: linear-gradient(45deg, #2196f3, #1976d2);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1rem;
            min-width: 120px; /* FIX #20: Reduced from 140px to fit better */
            white-space: nowrap;
        }
        
        .webs-container .state-search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
            background: linear-gradient(45deg, #1976d2, #0d47a1);
        }
        
        .webs-container .state-search-btn i {
            font-size: 1.2rem;
        }
        
        .webs-container .state-result {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
            border: 2px solid #4caf50;
            display: none;
            animation: slideIn 0.3s ease;
            /* FIX #21: Clip long URLs in results */
            overflow: hidden;
        }
        
        .webs-container .state-result.show {
            display: block;
        }
        
        .webs-container .state-result-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: 700;
            color: #2e7d32;
            font-size: 1.2rem;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 10px;
        }
        
        .webs-container .state-result-header i {
            color: #4caf50;
            margin-right: 8px;
        }
        
        .webs-container .state-link-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f5f5f5;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            /* FIX #22: Prevent URL from pushing container wide */
            overflow: hidden;
            min-width: 0;
        }
        
        .webs-container .state-link-text {
            color: #2196f3;
            font-size: 0.9rem;
            flex: 1;
            margin-right: 10px;
            /* FIX #23: Handle very long URLs gracefully */
            word-break: break-all;
            overflow-wrap: break-word;
            min-width: 0;
        }
        
        .webs-container .state-copy-btn {
            background: linear-gradient(45deg, #38b9c9, #14395d);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .webs-container .state-copy-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(56, 185, 201, 0.4);
        }
        
        .webs-container .state-copy-btn.copied {
            background: linear-gradient(45deg, #28a745, #20c997);
        }
        
        .webs-container .state-open-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: linear-gradient(45deg, #4caf50, #388e3c);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            width: 100%;
            box-sizing: border-box;
        }
        
        .webs-container .state-open-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);
            background: linear-gradient(45deg, #388e3c, #2e7d32);
        }
        
        .webs-container .state-open-btn i {
            font-size: 1.1rem;
        }
        
        .webs-container .state-error {
            background: #ffebee;
            color: #d32f2f;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #d32f2f;
            display: none;
        }
        
        .webs-container .state-error.show {
            display: block;
        }
        
        .webs-container .state-error i {
            margin-right: 8px;
        }
        
        .webs-container .popular-states {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }
        
        .webs-container .state-chip {
            background: rgba(33, 150, 243, 0.1);
            border: 1px solid #2196f3;
            color: #0d47a1;
            padding: 8px 15px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .webs-container .state-chip:hover {
            background: #2196f3;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.3);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Privacy Disclaimer Section */
        .webs-container .privacy-disclaimer {
            background: linear-gradient(145deg, #e8f4f8, #d1e9f0);
            border-radius: 12px;
            padding: 18px;
            margin: 25px 0 15px 0;
            border-left: 6px solid #14395d;
            box-shadow: 0 4px 12px rgba(20, 57, 93, 0.1);
            font-size: 0.95rem;
            line-height: 1.6;
            color: #14395d;
        }
        
        .webs-container .privacy-disclaimer i {
            color: #38b9c9;
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .webs-container .privacy-disclaimer strong {
            color: #14395d;
            font-weight: 700;
        }
        
        .webs-container .privacy-disclaimer .disclaimer-title {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            color: #14395d;
            border-bottom: 1px solid rgba(56, 185, 201, 0.3);
            padding-bottom: 8px;
        }
        
        .webs-container .privacy-disclaimer .disclaimer-text {
            color: #2c3e50;
        }
        
        .webs-container .privacy-disclaimer .highlight {
            background: rgba(255, 255, 255, 0.7);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: #14395d;
        }
        
        /* Work hours info box */
        .webs-container .work-hours-info {
            background-color: rgba(56, 185, 201, 0.1);
            border-left: 4px solid #14395d;
            padding: 12px;
            margin-top: 10px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            position: relative;
        }
        .webs-container .work-hours-info i {
            color: #14395d;
            margin-right: 6px;
        }
        
        /* Appointment Only Badge */
        .webs-container .appointment-only {
            position: absolute;
            top: -8px;
            right: 10px;
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(20, 57, 93, 0.3);
        }
        
        /* Mobile Navigation Buttons */
        .webs-container .mobile-nav {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 0;
            padding: 15px;
            position: relative;
            z-index: 10;
            background: white;
        }
        
        .webs-container .mobile-nav-btn {
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(20, 57, 93, 0.2);
            flex: 1;
            justify-content: center;
        }
        
        .webs-container .mobile-nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(20, 57, 93, 0.3);
        }
        
        .webs-container .mobile-nav-btn.active {
            background: linear-gradient(45deg, #38b9c9, #14395d);
            box-shadow: 0 4px 8px rgba(20, 57, 93, 0.4);
        }
        
        /* Back button for mobile */
        .webs-container .mobile-back-btn {
            display: flex;
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            align-items: center;
            gap: 8px;
            margin: 15px auto;
            max-width: 250px;
            justify-content: center;
            font-size: 0.95rem;
            box-shadow: 0 4px 8px rgba(20, 57, 93, 0.3);
        }
        
        .webs-container .mobile-back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(20, 57, 93, 0.4);
        }
        
        /* SMS Button */
        .webs-container .sms-btn {
            background: linear-gradient(45deg, #38b9c9, #14395d);
            color: white;
            border: none;
            padding: 16px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(20, 57, 93, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            box-sizing: border-box;
        }
        
        .webs-container .sms-btn:hover { 
            transform: translateY(-3px); 
            background: linear-gradient(45deg, #14395d, #38b9c9);
            box-shadow: 0 8px 20px rgba(20, 57, 93, 0.6);
        }
        
        /* Video Container Styles */
        .webs-container .video-container {
            margin: 20px 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(20, 57, 93, 0.2);
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            /* FIX #24: Ensure video doesn't overflow on mobile */
            max-width: 100%;
        }
        
        .webs-container .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .webs-container .video-title {
            color: #14395d;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .webs-container .video-title i {
            color: #38b9c9;
            font-size: 1.2rem;
        }
        
        /* Portfolio Button */
        .webs-container .portfolio-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            padding: 16px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            text-decoration: none;
            text-align: center;
            box-sizing: border-box;
        }
        
        .webs-container .portfolio-btn:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #ff8e8e, #ff6b6b);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
        }
        
        /* Invoice Button */
        .webs-container .invoice-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 16px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            text-decoration: none;
            text-align: center;
            box-sizing: border-box;
        }
        
        .webs-container .invoice-btn:hover { 
            transform: translateY(-3px); 
            background: linear-gradient(45deg, #20c997, #28a745);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.6);
        }
        
        /* Estimate Modal Styles */
        .webs-container .estimate-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(20, 57, 93, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200000;
            padding: 20px;
            /* FIX #25: Prevent modal from causing page-level scroll issues */
            overflow-y: auto;
            box-sizing: border-box;
        }
        
        .webs-container .estimate-modal-content {
            background: white;
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 30px 60px rgba(20, 57, 93, 0.5);
            /* FIX #26: Contain modal content */
            overflow-x: hidden;
        }
        
        .webs-container .estimate-modal-header {
            background: linear-gradient(135deg, #14395d, #38b9c9);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .webs-container .estimate-modal-header h2 {
            font-size: 1.5rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .webs-container .close-modal {
            background: #4fedf0;
            border: none;
            color: #14395d;
            font-size: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(79, 237, 240, 0.5);
            font-weight: bold;
            border: 2px solid white;
            flex-shrink: 0;
        }
        
        .webs-container .close-modal:hover {
            transform: scale(1.1) rotate(90deg);
            background: #3fd0d3;
            box-shadow: 0 6px 20px rgba(79, 237, 240, 0.8);
        }
        
        .webs-container .estimate-modal-body {
            padding: 30px;
        }
        
        /* Estimate Calculator Styles */
        .estimate-calculator {
            background: white;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .estimate-calculator .pricing-card {
            background: linear-gradient(145deg, #f8faff, rgba(56, 185, 201, 0.1));
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(20, 57, 93, 0.1);
        }
        
        .estimate-calculator .pricing-card h3 {
            color: #14395d;
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .estimate-calculator .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .estimate-calculator .pricing-item {
            background: white;
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #14395d;
            font-size: 0.9rem;
        }
        
        .estimate-calculator .pricing-item span {
            font-weight: 700;
            color: #14395d;
            display: block;
            margin-top: 3px;
        }
        
        .estimate-calculator .section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(20, 57, 93, 0.1);
        }
        
        .estimate-calculator .section h3 {
            color: #14395d;
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .estimate-calculator label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            padding: 8px 12px;
            background: rgba(56, 185, 201, 0.05);
            border-radius: 8px;
            cursor: pointer;
        }
        
        .estimate-calculator input[type="radio"],
        .estimate-calculator input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #14395d;
            flex-shrink: 0;
        }
        
        .estimate-calculator input[type="number"],
        .estimate-calculator select {
            padding: 8px 12px;
            border: 2px solid rgba(56, 185, 201, 0.3);
            border-radius: 8px;
            font-size: 0.9rem;
            width: 100%;
            max-width: 150px;
            margin-left: auto;
        }
        
        .estimate-calculator .calc-btn {
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s;
            box-sizing: border-box;
        }
        
        .estimate-calculator .calc-btn:hover {
            background: linear-gradient(45deg, #38b9c9, #14395d);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(20, 57, 93, 0.3);
        }
        
        .estimate-calculator .result-box {
            background: linear-gradient(145deg, #14395d, #38b9c9);
            color: white;
            padding: 20px;
            border-radius: 12px;
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin: 20px 0 10px 0;
            scroll-margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .estimate-calculator .result-box.highlight {
            transform: scale(1.02);
            box-shadow: 0 0 30px rgba(56, 185, 201, 0.5);
        }
        
        .estimate-calculator .result-box span {
            font-size: 2rem;
            margin-left: 5px;
        }
        
        /* Compliance Banner Section */
        .estimate-calculator .compliance-section {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border: 2px solid #2196f3;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .estimate-calculator .compliance-section h4 {
            color: #0d47a1;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .estimate-calculator .compliance-section p {
            color: #0d47a1;
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.5;
            background: rgba(255,255,255,0.7);
            padding: 10px;
            border-radius: 8px;
        }
        
        .estimate-calculator .compliance-section label {
            background: white;
            border: 2px solid #2196f3;
            margin-top: 5px;
        }
        
        .estimate-calculator .compliance-section .compliance-warning {
            color: #d32f2f;
            font-weight: 600;
            font-size: 0.9rem;
            margin-top: 10px;
            padding: 10px;
            background: #ffebee;
            border-radius: 8px;
            display: none;
        }
        
        .estimate-calculator .compliance-section .compliance-warning.show {
            display: block;
        }
        
        /* Monthly Payment Display */
        .estimate-calculator .monthly-payment-box {
            background: linear-gradient(145deg, #45bcd1, #2aa3b8);
            color: white;
            padding: 15px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            text-align: center;
            margin: 10px 0;
        }
        
        .estimate-calculator .monthly-payment-box span {
            font-size: 1.8rem;
            margin-left: 5px;
        }
        
        /* Promotion Code Section */
        .estimate-calculator .promo-section {
            background: linear-gradient(135deg, #fff3cd, #fff9e6);
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .estimate-calculator .promo-section h4 {
            color: #856404;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .estimate-calculator .promo-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .estimate-calculator .promo-input-group input {
            flex: 1;
            min-width: 0; /* FIX #27: Allow promo input to shrink */
            padding: 12px;
            border: 2px solid #ffc107;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        
        .estimate-calculator .promo-input-group button {
            background: linear-gradient(45deg, #ffc107, #ff9800);
            color: #333;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .estimate-calculator .promo-input-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.4);
        }
        
        .estimate-calculator .promo-message {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
        }
        
        .estimate-calculator .promo-message.success {
            background: #d4edda;
            color: #155724;
            display: block;
        }
        
        .estimate-calculator .promo-message.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
        }
        
        .estimate-calculator .promo-saved {
            font-size: 0.95rem;
            color: #28a745;
            font-weight: 600;
            margin-top: 5px;
        }
        
        .estimate-calculator .modal-sms-btn {
            background: linear-gradient(45deg, #38b9c9, #14395d);
            color: white;
            border: none;
            padding: 18px 30px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(56, 185, 201, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0 10px 0;
            animation: pulse 2s infinite;
            border: 2px solid white;
            box-sizing: border-box;
        }
        
        .estimate-calculator .modal-sms-btn:hover { 
            transform: translateY(-3px) scale(1.02);
            background: linear-gradient(45deg, #14395d, #38b9c9);
            box-shadow: 0 8px 25px rgba(56, 185, 201, 0.7);
        }
        
        .estimate-calculator .modal-sms-btn i {
            font-size: 1.5rem;
        }
        
        .estimate-calculator .phone-number {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 30px;
            margin-left: 8px;
            letter-spacing: 1px;
        }
        
        .estimate-calculator .footnote {
            text-align: center;
            color: #666;
            font-size: 0.8rem;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        /* Question Form Dropdown */
        .webs-container .question-form-group {
            margin-bottom: 25px;
        }
        
        .webs-container .question-form-group .question-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #14395d;
            font-size: 1rem;
        }
        
        .webs-container .question-form-group select {
            width: 100%;
            padding: 15px;
            border: 3px solid rgba(56, 185, 201, 0.3);
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            box-sizing: border-box;
        }
        
        .webs-container .question-form-group select:hover {
            border-color: #14395d;
        }
        
        .webs-container .question-form-group select:focus {
            outline: none;
            border-color: #38b9c9;
            box-shadow: 0 0 0 3px rgba(56, 185, 201, 0.2);
        }
        
        /* Other Service Textarea */
        .webs-container .other-service-container {
            margin-top: 15px;
            padding: 20px;
            background: rgba(56, 185, 201, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(20, 57, 93, 0.1);
            display: none;
        }
        
        .webs-container .other-service-container.show {
            display: block;
        }
        
        .webs-container .other-service-container label {
            display: block;
            margin-bottom: 10px;
            color: #14395d;
            font-weight: 600;
        }
        
        .webs-container .other-service-textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
            transition: all 0.3s;
            box-sizing: border-box;
        }
        
        .webs-container .other-service-textarea:focus {
            outline: none;
            border-color: #38b9c9;
            box-shadow: 0 0 0 3px rgba(56, 185, 201, 0.2);
        }
        
        /* View Pricing Links Container */
        .webs-container .pricing-links-container {
            display: flex;
            gap: 10px;
            margin: 15px 0 20px 0;
            flex-wrap: wrap;
        }
        
        .webs-container .pricing-links-container .view-pricing-link {
            flex: 1;
            min-width: 180px;
            margin: 0;
        }
        
        .webs-container .view-pricing-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #14395d, #38b9c9);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s;
            border: 2px solid white;
            box-shadow: 0 4px 10px rgba(20, 57, 93, 0.3);
            gap: 8px;
            font-size: 0.95rem;
            box-sizing: border-box;
        }
        
        .webs-container .view-pricing-link.advertising {
            background: linear-gradient(45deg, #38b9c9, #14395d);
        }
        
        .webs-container .view-pricing-link.market-price {
            background: linear-gradient(45deg, #9c27b0, #6a1b9a);
        }
        
        .webs-container .view-pricing-link.pwa-price {
            background: linear-gradient(45deg, #ff9800, #f57c00);
        }
        
        .webs-container .view-pricing-link:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(56, 185, 201, 0.4);
        }
        
        .webs-container .view-pricing-link i {
            margin-right: 0;
        }
        
        /* Pulse animation */
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(56, 185, 201, 0.7);
            }
            70% {
                box-shadow: 0 0 0 20px rgba(56, 185, 201, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(56, 185, 201, 0);
            }
        }
        
        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }
        
        /* Scroll targets with proper offset */
        .scroll-target {
            scroll-margin-top: 15px;
        }
        
        /* Desktop view */
        @media (min-width: 901px) {
            .webs-container {
                padding: 20px;
            }

            .webs-container .form-container {
                border-radius: 20px;
                border: 8px solid transparent;
                border-image: linear-gradient(45deg, #14395d, #38b9c9, #14395d) 1;
                animation: borderGlow 3s infinite alternate;
            }

            @keyframes borderGlow {
                0% { border-image-source: linear-gradient(45deg, #14395d, #38b9c9, #14395d); }
                50% { border-image-source: linear-gradient(45deg, #38b9c9, #14395d, #38b9c9); }
                100% { border-image-source: linear-gradient(45deg, #14395d, #38b9c9, #14395d); }
            }
            
            .webs-container .form-wrapper {
                width: 100%;
                transform: none !important;
                display: flex;
            }
            
            .webs-container .form-panel {
                width: 50%;
                padding: 30px;
            }
            
            .webs-container .mobile-nav,
            .webs-container .mobile-back-btn {
                display: none !important;
            }
            
            .webs-container .appointment-panel {
                border-right: 3px dashed rgba(56, 185, 201, 0.5);
            }

            .webs-container .header h1 {
                font-size: 2.2rem;
                margin-right: 15px;
            }

            .webs-container .emoji-container {
                width: 200px;
                height: 80px;
                margin-left: 20px;
            }

            .webs-container .emoji {
                font-size: 3.5rem;
                margin-left: -35px;
                margin-top: -35px;
            }

            .webs-container .panel-title {
                font-size: 1.8rem;
                margin-bottom: 25px;
            }

            .webs-container .time-slots-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }

            .webs-container .calendar-header h3 {
                font-size: 1.3rem;
            }

            .webs-container .calendar-day {
                padding: 10px;
                font-size: 0.8rem;
            }

            .webs-container .calendar-date {
                padding: 12px;
                font-size: 1rem;
            }

            .webs-container .calendar-grid {
                gap: 5px;
            }

            .webs-container .pricing-links-container .view-pricing-link {
                min-width: 200px;
            }
            
            .webs-container .instruction-banner .instruction-row {
                flex-wrap: nowrap;
            }
        }
        
        /* Mobile view */
        @media (max-width: 900px) {
            .webs-container .form-wrapper {
                /* FIX #28: KEY FIX — 200% width is what enables the slide,
                   but the overflow:hidden on .form-container clips it.
                   Adding touch-action prevents accidental horizontal swipe scroll. */
                width: 200%;
                touch-action: pan-y;
            }
            
            .webs-container .form-panel {
                width: 50%;
            }
            
            .webs-container .mobile-nav {
                display: flex;
            }
            
            .webs-container .mobile-back-btn {
                display: flex;
            }
            
            .webs-container .time-slots-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .webs-container .pricing-links-container {
                flex-direction: column;
            }
            
            .webs-container .instruction-banner .instruction-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .webs-container .instruction-banner .instruction-btn {
                width: 100%;
                justify-content: center;
            }
            
            .webs-container .instruction-banner .btn-or {
                align-self: center;
            }

            /* FIX #29: Smaller placeholder text on mobile for state input */
            .webs-container .state-input::placeholder {
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 600px) {
            .webs-container .header {
                flex-direction: column;
                text-align: center;
                padding: 15px;
            }
            
            .webs-container .header h1 { 
                font-size: 1.6rem; 
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .webs-container .emoji-container {
                margin-left: 0;
                margin-top: 8px;
                width: 100px;
                height: 45px;
            }
            
            .webs-container .emoji {
                font-size: 2rem;
                margin-left: -20px;
                margin-top: -20px;
            }
            
            .webs-container .form-panel {
                padding: 15px;
            }

            .webs-container .mobile-nav {
                padding: 12px;
                gap: 6px;
            }
            
            .webs-container .mobile-nav-btn {
                padding: 10px 15px;
                font-size: 0.85rem;
                gap: 5px;
            }

            .webs-container .panel-title {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            .webs-container .calendar-header h3 {
                font-size: 1rem;
            }

            .webs-container .calendar-header button {
                padding: 6px 12px;
                font-size: 0.9rem;
            }

            .webs-container .calendar-day {
                font-size: 0.7rem;
                padding: 6px 2px;
            }

            .webs-container .calendar-date {
                padding: 8px 2px;
                font-size: 0.85rem;
            }

            .webs-container .calendar-grid {
                gap: 3px;
            }

            .webs-container .time-slots-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
            }

            .webs-container .time-slot {
                padding: 10px 6px;
                font-size: 0.85rem;
            }

            .webs-container .sms-btn,
            .webs-container .call-btn,
            .estimate-calculator .modal-sms-btn {
                padding: 14px 25px;
                font-size: 1rem;
            }

            .webs-container .work-hours-info {
                font-size: 0.8rem;
                padding: 10px;
            }

            .webs-container .appointment-only {
                font-size: 0.65rem;
                padding: 3px 10px;
                top: -6px;
                right: 8px;
            }

            .webs-container .estimate-modal-header h2 {
                font-size: 1.2rem;
            }
            
            .webs-container .estimate-modal-body {
                padding: 20px;
            }
            
            .estimate-calculator .pricing-grid {
                grid-template-columns: 1fr;
            }
            
            .estimate-calculator .modal-sms-btn {
                font-size: 1.1rem;
                padding: 15px 20px;
            }
            
            .estimate-calculator .phone-number {
                font-size: 1rem;
                padding: 3px 10px;
            }
            
            .webs-container .state-search-container {
                flex-direction: column;
            }
            
            .webs-container .state-search-btn {
                width: 100%;
            }
            
            .webs-container .popular-states {
                justify-content: center;
            }

            /* FIX #30: Footer copy section on very small screens */
            .webs-container .footer-copy-item {
                flex-direction: row;
                gap: 10px;
            }

            .webs-container .footer-link-title {
                font-size: 1rem;
            }

            .webs-container .footer-link-url {
                font-size: 0.75rem;
            }

            /* FIX #31: Estimate modal phone number on small screens */
            .estimate-calculator .phone-number {
                display: none; /* Hide on very small screens to prevent overflow */
            }
        }

        /* FIX #32: Extra small devices (under 380px) */
        @media (max-width: 380px) {
            .webs-container .mobile-nav-btn {
                font-size: 0.78rem;
                padding: 10px 10px;
                gap: 4px;
            }

            .webs-container .header h1 {
                font-size: 1.35rem;
            }

            .webs-container .panel-title {
                font-size: 1.15rem;
            }

            .webs-container .state-chip {
                font-size: 0.8rem;
                padding: 6px 12px;
            }

            .webs-container .footer-copy-btn {
                width: 40px;
                height: 40px;
                margin-left: 10px;
            }

            .webs-container .pricing-links-container .view-pricing-link {
                min-width: 100%;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- ============================================
         PWA INSTALL BANNER (Android / Desktop)
         Shown automatically when browser fires
         the beforeinstallprompt event
    ============================================ -->
    <div id="pwa-install-banner" role="banner" aria-label="Install WebSwan app">
        <div class="pwa-banner-left">
            <div class="pwa-banner-icon">🌐</div>
            <div class="pwa-banner-text">
                <strong>Install WebSwan</strong>
                <span>Add to your home screen — works offline!</span>
            </div>
        </div>
        <div class="pwa-banner-buttons">
            <button id="pwa-install-btn"><i class="fas fa-download"></i> Install App</button>
            <button id="pwa-dismiss-btn">Not now</button>
        </div>
    </div>

    <!-- ============================================
         iOS INSTALL MODAL OVERLAY
    ============================================ -->
    <div id="ios-modal-overlay"></div>

    <!-- ============================================
         iOS INSTALL INSTRUCTIONS MODAL
         Safari on iOS doesn't support beforeinstallprompt
         so we show step-by-step instructions instead
    ============================================ -->
    <div id="ios-install-modal" role="dialog" aria-modal="true" aria-label="How to install WebSwan on iPhone">
        <div class="ios-modal-handle"></div>
        <div class="ios-modal-header">
            <div class="ios-modal-title">
                <div class="app-icon">🌐</div>
                Install WebSwan
            </div>
            <button id="ios-close-btn" aria-label="Close"><i class="fas fa-times"></i></button>
        </div>
        <ol class="ios-steps">
            <li>
                <span class="ios-step-num">1</span>
                <span class="ios-step-icon">⬆️</span>
                <span>Tap the <strong>Share</strong> button at the bottom of your Safari browser (the box with an arrow pointing up)</span>
            </li>
            <li>
                <span class="ios-step-num">2</span>
                <span class="ios-step-icon">📋</span>
                <span>Scroll down in the Share menu and tap <strong>"Add to Home Screen"</strong></span>
            </li>
            <li>
                <span class="ios-step-num">3</span>
                <span class="ios-step-icon">✏️</span>
                <span>The name <strong>"WebSwan"</strong> will be pre-filled — tap <strong>"Add"</strong> in the top right corner</span>
            </li>
            <li>
                <span class="ios-step-num">4</span>
                <span class="ios-step-icon">🎉</span>
                <span>Done! The <strong>WebSwan app icon</strong> will appear on your home screen and launch like a native app</span>
            </li>
        </ol>
        <div class="ios-arrow-hint">
            <i class="fas fa-info-circle"></i>
            Open this page in <strong>Safari</strong> for the best install experience on iPhone & iPad
        </div>
    </div>

    <!-- Floating install button (shown after banner is dismissed) -->
    <button id="pwa-fab" aria-label="Install WebSwan app" title="Install App">
        <i class="fas fa-download"></i>
    </button>

    <div class="webs-container">
        <!-- Language Switcher -->
        <div class="language-switcher">
            <select id="languageSwitcher" class="lang-select" onchange="translateFullPage(this.value)">
                <option value="en">🇺🇸 English</option>
                <option value="es">🇪🇸 Español</option>
                <option value="fr">🇫🇷 Français</option>
                <option value="pt">🇧🇷 Português</option>
                <option value="ht">🇭🇹 Kreyòl Ayisyen</option>
            </select>
        </div>

        <!-- Estimate Modal -->
        <div class="estimate-modal" id="estimateModal">
            <div class="estimate-modal-content">
                <div class="estimate-modal-header">
                    <h2><i class="fas fa-calculator"></i> <span data-en="Project Estimate" data-es="Estimación de Proyecto" data-fr="Estimation de Projet" data-pt="Estimativa de Projeto" data-ht="Estimasyon Pwojè">Project Estimate</span></h2>
                    <button class="close-modal" id="closeEstimateModal"><i class="fas fa-times"></i></button>
                </div>
                <div class="estimate-modal-body" id="estimateModalBody">
                    <!-- Estimate calculator will be loaded here -->
                </div>
            </div>
        </div>

        <div class="form-container" id="application">
            <div class="mobile-nav">
                <button class="mobile-nav-btn active" id="navToAppointment">
                    <i class="fas fa-calendar-alt"></i> <span data-en="Book Appointment" data-es="Reservar Cita" data-fr="Prendre Rendez-vous" data-pt="Agendar Consulta" data-ht="Prann Rendez-vous">Book Appointment</span>
                </button>
                <button class="mobile-nav-btn" id="navToQuestion">
                    <i class="fas fa-question-circle"></i> <span data-en="Ask Questions" data-es="Hacer Preguntas" data-fr="Poser des Questions" data-pt="Fazer Perguntas" data-ht="Poz Kesyon">Ask Questions</span>
                </button>
            </div>
            
            <div class="form-wrapper" id="formWrapper">
                <!-- Left Panel - Appointment -->
                <div class="form-panel appointment-panel" id="appointmentSection">
                    <div class="header">
                        <h1 data-en="WebSwan Services" data-es="Servicios WebSwan" data-fr="Services WebSwan" data-pt="Serviços WebSwan" data-ht="Sèvis WebSwan">WebSwan Services</h1>
                        <div class="emoji-container">
                            <div class="emoji">🛜</div>
                            <div class="emoji">💯</div>
                            <div class="emoji">🗣</div>
                            <div class="emoji">🌐</div>
                            <div class="emoji">💻</div>
                            <div class="emoji">📱</div>
                            <div class="emoji">📊</div>
                            <div class="emoji">🎯</div>
                        </div>
                    </div>
                    
                    <h2 class="panel-title" style="margin-top: 20px;" data-en="Book Your Service Appointment" data-es="Reserve su Cita de Servicio" data-fr="Réservez votre Rendez-vous de Service" data-pt="Agende sua Consulta de Serviço" data-ht="Prann Rendez-vous Sèvis Ou">Book Your Service Appointment</h2>
                    
                    <!-- INSTRUCTION BANNER WITH TWO BUTTONS -->
                    <div class="instruction-banner">
                        <div class="instruction-row">
                            <div class="instruction-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="instruction-text">
                                <strong>Click a date</strong> to set up a phone appointment
                            </div>
                            <button class="instruction-btn" onclick="scrollToCalendar()">
                                <i class="fas fa-arrow-down"></i> Select Date
                            </button>
                        </div>
                        
                        <div class="instruction-row">
                            <div class="instruction-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <div class="instruction-text">
                                <strong>Click here</strong> to select your service and view your estimate
                            </div>
                            <button class="instruction-btn" onclick="scrollToService()">
                                <i class="fas fa-arrow-down"></i> Calculate Estimate
                            </button>
                        </div>
                    </div>
                    
                    <!-- Waiver Notice for Advertising -->
                    <div class="waiver-notice">
                        <i class="fas fa-check-circle"></i> <span data-en="If you have a website with us, the set-up fee for advertising is waived! You only pay the monthly subscription." data-es="Si tiene un sitio web con nosotros, ¡la tarifa de configuración para publicidad se elimina! Solo paga la suscripción mensual." data-fr="Si vous avez un site web avec nous, les frais de configuration pour la publicité sont supprimés ! Vous ne payez que l'abonnement mensuel." data-pt="Se você tem um site conosco, a taxa de configuração para publicidade é dispensada! Você paga apenas a assinatura mensual." data-ht="Si ou gen yon sit entènèt avèk nou, frè enstalasyon an pou piblisite anile! Ou sèlman peye abònman chak mwa.">If you have a website with us, the set-up fee for advertising is waived! You only pay the monthly subscription.</span>
                    </div>
                    
                    <div class="work-hours-info">
                        <div class="appointment-only"><span data-en="By Appointment Only" data-es="Solo con Cita" data-fr="Sur Rendez-vous Uniquement" data-pt="Somente com Agendamento" data-ht="Sou Rendez-vous Sèlman">By Appointment Only</span></div>
                        <i class="fas fa-clock"></i> 
                        <span data-en="Business Hours:" data-es="Horario de Atención:" data-fr="Heures d'Ouverture:" data-pt="Horário de Funcionamento:" data-ht="Lè Biznis:">Business Hours:</span> <span data-en="Monday to Friday, 10:00 AM - 8:00 PM (45-min slots)" data-es="Lunes a Viernes, 10:00 AM - 8:00 PM (intervalos de 45 min)" data-fr="Lundi au Vendredi, 10h00 - 20h00 (créneaux de 45 min)" data-pt="Segunda a Sexta, 10:00 - 20:00 (intervalos de 45 min)" data-ht="Lendi rive Vandredi, 10:00 AM - 8:00 PM (slots 45 min)">Monday to Friday, 10:00 AM - 8:00 PM (45-min slots)</span><br>
                        <i class="fas fa-calendar-times"></i> 
                        <span data-en="Closed:" data-es="Cerrado:" data-fr="Fermé:" data-pt="Fechado:" data-ht="Fèmen:">Closed:</span> <span data-en="Saturdays, Sundays" data-es="Sábados, Domingos" data-fr="Samedis, Dimanches" data-pt="Sábados, Domingos" data-ht="Samdi, Dimanch">Saturdays, Sundays</span>
                    </div>
                    
                    <div class="selected-date-display" id="selectedDateDisplay">
                        <span data-en="Selected:" data-es="Seleccionado:" data-fr="Sélectionné:" data-pt="Selecionado:" data-ht="Seleksyone:">Selected:</span> <span id="displayDate"></span> <span data-en="at" data-es="a las" data-fr="à" data-pt="às" data-ht="a">at</span> <span id="displayTime">[<span data-en="Select Time" data-es="Seleccionar Hora" data-fr="Sélectionner l'Heure" data-pt="Selecionar Horário" data-ht="Chwazi Lè">Select Time</span>]</span>
                    </div>
                    
                    <div class="calendar-container" id="calendarSection">
                        <div class="calendar-header">
                            <button id="prevMonth"><i class="fas fa-chevron-left"></i></button>
                            <h3 id="currentMonth"></h3>
                            <button id="nextMonth"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        
                        <div class="calendar-grid" id="calendarDays">
                            <div class="calendar-day"><span data-en="Sun" data-es="Dom" data-fr="Dim" data-pt="Dom" data-ht="Dim">Sun</span></div>
                            <div class="calendar-day"><span data-en="Mon" data-es="Lun" data-fr="Lun" data-pt="Seg" data-ht="Len">Mon</span></div>
                            <div class="calendar-day"><span data-en="Tue" data-es="Mar" data-fr="Mar" data-pt="Ter" data-ht="Ma">Tue</span></div>
                            <div class="calendar-day"><span data-en="Wed" data-es="Mié" data-fr="Mer" data-pt="Qua" data-ht="Me">Wed</span></div>
                            <div class="calendar-day"><span data-en="Thu" data-es="Jue" data-fr="Jeu" data-pt="Qui" data-ht="Je">Thu</span></div>
                            <div class="calendar-day"><span data-en="Fri" data-es="Vie" data-fr="Ven" data-pt="Sex" data-ht="Va">Fri</span></div>
                            <div class="calendar-day"><span data-en="Sat" data-es="Sáb" data-fr="Sam" data-pt="Sáb" data-ht="Sa">Sat</span></div>
                        </div>
                    </div>
                    
                    <div class="time-slots-container" id="timeSlotsContainer">
                        <h4 style="color: #14395d; margin-bottom: 10px; font-size: 1rem;" data-en="Select Appointment Time (45-min slots, 10:00 AM - 8:00 PM):" data-es="Seleccione Hora de Cita (intervalos de 45 min, 10:00 AM - 8:00 PM):" data-fr="Sélectionnez l'Heure du Rendez-vous (créneaux de 45 min, 10h00 - 20h00):" data-pt="Selecione o Horário da Consulta (intervalos de 45 min, 10:00 - 20:00):" data-ht="Chwazi Lè Rendez-vous (slots 45 min, 10:00 AM - 8:00 PM):">Select Appointment Time (45-min slots, 10:00 AM - 8:00 PM):</h4>
                        <div class="time-slots-grid" id="timeSlotsGrid"></div>
                    </div>
                    
                    <!-- SERVICE DROPDOWN -->
                    <div class="form-group" id="serviceSection">
                        <label class="form-label" for="appointmentReason"><span data-en="What type of service are you looking for?" data-es="¿Qué tipo de servicio está buscando?" data-fr="Quel type de service recherchez-vous?" data-pt="Que tipo de serviço você está procurando?" data-ht="Ki kalite sèvis w ap chèche?">What type of service are you looking for?</span></label>
                        <select class="form-select" id="appointmentReason">
                            <option value=""><span data-en="Select a service" data-es="Seleccione un servicio" data-fr="Sélectionnez un service" data-pt="Selecione um serviço" data-ht="Chwazi yon sèvis">Select a service</span></option>
                            <option value="web-design">💻 Web Design</option>
                            <option value="landing-page">📄 Landing Page</option>
                            <option value="custom-uiux">🎨 Custom UI/UX Web Design</option>
                            <option value="pwa-app">📱 PWA Phone App</option>
                            <option value="calendar">📅 Calendar</option>
                            <option value="form">📋 Form</option>
                            <option value="free-demo">🎁 Free Demo</option>
                            <option value="ad-campaign-video">🎬 Ad Campaign Video</option>
                            <option value="ad-campaign-script">📝 Ad Campaign Script</option>
                            <option value="advertising">📢 Advertising</option>
                            <option value="seo">🔍 SEO Services</option>
                            <option value="reputation">⭐ Reputation Management</option>
                            <option value="brand-hub">🏢 Interactive Brand Hub</option>
                            <option value="compliance">⚖️ Compliance Banner Only</option>
                        </select>
                    </div>
                    
                    <!-- Portfolio Button -->
                    <a href="https://www.thewebswan.com/portfolio" target="_blank" class="portfolio-btn">
                        <i class="fas fa-images"></i> <span data-en="View Portfolio" data-es="Ver Portafolio" data-fr="Voir Portfolio" data-pt="Ver Portfólio" data-ht="Gade Portfolyo">View Portfolio</span>
                    </a>
                    
                    <!-- Video 1 -->
                    <div class="video-title">
                        <i class="fas fa-play-circle"></i> <span data-en="Small Business Advertising" data-es="Publicidad para Pequeñas Empresas" data-fr="Publicité pour Petites Entreprises" data-pt="Publicidade para Pequenas Empresas" data-ht="Piblisite pou Ti Biznis">Small Business Advertising</span>
                    </div>
                    <div class="video-container">
                        <iframe src="https://www.youtube.com/embed/KRMrXPFNkQs" title="WebSwan Media Network Small Business Advertising" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    
                    <!-- Video 2 -->
                    <div class="video-title" style="margin-top: 25px;">
                        <i class="fas fa-play-circle"></i> <span data-en="UX/UI Certified Web Designer" data-es="Diseñador Web Certificado UX/UI" data-fr="Concepteur Web Certifié UX/UI" data-pt="Designer Web Certificado UX/UI" data-ht="Konseptè Web Sètifye UX/UI">UX/UI Certified Web Designer</span>
                    </div>
                    <div class="video-container">
                        <iframe src="https://www.youtube.com/embed/z4L_hzXmQRA" title="UX/UI Certified Web Designer" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    
                    <a href="tel:4158770687" class="call-btn">
                        <i class="fas fa-phone-alt"></i> <span data-en="Call Now:" data-es="Llamar Ahora:" data-fr="Appeler Maintenant:" data-pt="Ligar Agora:" data-ht="Rele Kounye a:">Call Now:</span> (415) 877-0687
                    </a>
                </div>
                
                <!-- Right Panel - Questions -->
                <div class="form-panel questions-panel" id="question">
                    <h2 class="panel-title" data-en="Questions About Our Services?" data-es="¿Preguntas Sobre Nuestros Servicios?" data-fr="Des Questions sur Nos Services?" data-pt="Dúvidas Sobre Nossos Serviços?" data-ht="Kesyon sou Sèvis Nou yo?">Questions About Our Services?</h2>
                    <p style="margin-bottom: 20px; color: #555; font-size: 0.95rem;" data-en="Leave your details and we will contact you." data-es="Deje sus datos y nos comunicaremos con usted." data-fr="Laissez vos coordonnées et nous vous contacterons." data-pt="Deixe seus dados e entraremos em contato." data-ht="Kite enfòmasyon ou epi n ap kontakte ou.">Leave your details and we will contact you.</p>
                    
                    <!-- FOUR View Pricing Links -->
                    <div class="pricing-links-container">
                        <a href="https://www.thewebswan.com/pricing--39bf6158-d773-4eaa-aae7-7828c9fdd8db" target="_blank" class="view-pricing-link">
                            <i class="fas fa-paint-brush"></i> <span data-en="Web Design Pricing" data-es="Precios Diseño Web" data-fr="Tarifs Design Web" data-pt="Preços Design Web" data-ht="Pri Konsepsyon Web">Web Design Pricing</span>
                        </a>
                        <a href="https://www.webswanmedianetwork.com/pricing" target="_blank" class="view-pricing-link advertising">
                            <i class="fas fa-ad"></i> <span data-en="Advertising Pricing" data-es="Precios Publicidad" data-fr="Tarifs Publicité" data-pt="Preços Publicidade" data-ht="Pri Piblisite">Advertising Pricing</span>
                        </a>
                        <a href="https://www.google.com/search?q=price+for+custom+web+development+from+a+certified+web+developer+ui%2Fux+expert+ai+view" target="_blank" class="view-pricing-link market-price">
                            <i class="fas fa-chart-line"></i> <span data-en="UX/UI Market Price" data-es="Precio de Mercado UX/UI" data-fr="Prix du Marché UX/UI" data-pt="Preço de Mercado UX/UI" data-ht="Pri Mache UX/UI">UX/UI Market Price</span>
                        </a>
                        <a href="https://www.google.com/search?q=price+for+custom+web+development+from+a+certified+web+developer+ui%2Fux+expert+ai+view" target="_blank" class="view-pricing-link pwa-price">
                            <i class="fas fa-mobile-alt"></i> <span data-en="PWA Market Price" data-es="Precio de Mercado PWA" data-fr="Prix du Marché PWA" data-pt="Preço de Mercado PWA" data-ht="Pri Mache PWA">PWA Market Price</span>
                        </a>
                    </div>
                    
                    <form id="contactForm">
                        <div class="form-group">
                            <label class="form-label"><span data-en="Full Name:" data-es="Nombre Completo:" data-fr="Nom Complet:" data-pt="Nome Completo:" data-ht="Non Konplè:">Full Name:</span></label>
                            <input type="text" class="form-input" placeholder="Your Name" id="contactName">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label"><span data-en="Phone Number:" data-es="Número de Teléfono:" data-fr="Numéro de Téléphone:" data-pt="Número de Telefone:" data-ht="Nimewo Telefòn:">Phone Number:</span></label>
                            <input type="tel" class="form-input" placeholder="Phone Number" id="contactPhone">
                        </div>
                        
                        <!-- Question Form Dropdown -->
                        <div class="question-form-group">
                            <label class="question-label" for="questionService"><span data-en="What are you interested in?" data-es="¿En qué está interesado?" data-fr="Qu'est-ce qui vous intéresse?" data-pt="No que você está interessado?" data-ht="Ki sa w enterese?">What are you interested in?</span></label>
                            <select id="questionService" onchange="toggleOtherServiceQuestion(this.value)">
                                <option value="">Select an option</option>
                                <option value="custom-web-design">Custom Web Design</option>
                                <option value="landing-page">Landing Page</option>
                                <option value="pwa-app">PWA Phone App</option>
                                <option value="calendar">Calendar</option>
                                <option value="form">Form</option>
                                <option value="free-demo">Free Demo</option>
                                <option value="ad-campaign-video">Ad Campaign Video</option>
                                <option value="ad-campaign-script">Ad Campaign Script</option>
                                <option value="compliance-banner">⚖️ Compliance Banner</option>
                                <option value="reputation-management">Reputation Management</option>
                                <option value="monthly-payments">Monthly Payments</option>
                                <option value="specials">Specials</option>
                                <option value="logo">Logo</option>
                                <option value="qr-code">QR Code</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <!-- Other Service Container -->
                        <div id="otherQuestionContainer" class="other-service-container">
                            <label for="otherQuestionText"><span data-en="Please describe your request (max 150 words):" data-es="Por favor describa su solicitud (máx 150 palabras):" data-fr="Veuillez décrire votre demande (max 150 mots):" data-pt="Por favor, descreva sua solicitação (máx 150 palavras):" data-ht="Tanpri dekri demann ou (max 150 mo):">Please describe your request (max 150 words):</span></label>
                            <textarea id="otherQuestionText" class="other-service-textarea" maxlength="750" placeholder="Tell us more about what you need..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label"><span data-en="Message:" data-es="Mensaje:" data-fr="Message:" data-pt="Mensagem:" data-ht="Mesaj:">Message:</span></label>
                            <textarea class="form-textarea" id="message" placeholder="How can we help you?"></textarea>
                        </div>
                        
                        <button type="submit" class="sms-btn">
                            <i class="fas fa-comment-alt"></i> <span data-en="SMS to" data-es="SMS a" data-fr="SMS à" data-pt="SMS para" data-ht="SMS pou">SMS to</span> (415) 877-0687
                        </button>
                        
                        <a href="tel:4158770687" class="call-btn">
                            <i class="fas fa-phone-alt"></i> <span data-en="Call Now:" data-es="Llamar Ahora:" data-fr="Appeler Maintenant:" data-pt="Ligar Agora:" data-ht="Rele Kounye a:">Call Now:</span> (415) 877-0687
                        </a>
                    </form>
                    
                    <!-- Invoice Button -->
                    <a href="https://webswan-invoice.netlify.app/" target="_blank" class="invoice-btn">
                        <i class="fas fa-file-invoice"></i> <span data-en="WebSwan Invoice" data-es="Factura WebSwan" data-fr="Facture WebSwan" data-pt="Fatura WebSwan" data-ht="Fakti WebSwan">WebSwan Invoice</span>
                    </a>
                    
                    <!-- STATE COMPLIANCE SEARCH SECTION -->
                    <div class="state-compliance-section">
                        <div class="state-compliance-title">
                            <i class="fas fa-gavel"></i> State Compliance Search
                        </div>
                        
                        <div class="state-search-container">
                            <input type="text" class="state-input" id="stateInput" placeholder="Enter state name (e.g., California...)" list="stateSuggestions">
                            <datalist id="stateSuggestions">
                                <option value="California">
                                <option value="New York">
                                <option value="Texas">
                                <option value="Florida">
                                <option value="Georgia">
                                <option value="Alabama">
                                <option value="Alaska">
                                <option value="Arizona">
                                <option value="Arkansas">
                                <option value="Colorado">
                                <option value="Connecticut">
                                <option value="Delaware">
                                <option value="Hawaii">
                                <option value="Idaho">
                                <option value="Illinois">
                                <option value="Indiana">
                                <option value="Iowa">
                                <option value="Kansas">
                                <option value="Kentucky">
                                <option value="Louisiana">
                                <option value="Maine">
                                <option value="Maryland">
                                <option value="Massachusetts">
                                <option value="Michigan">
                                <option value="Minnesota">
                                <option value="Mississippi">
                                <option value="Missouri">
                                <option value="Montana">
                                <option value="Nebraska">
                                <option value="Nevada">
                                <option value="New Hampshire">
                                <option value="New Jersey">
                                <option value="New Mexico">
                                <option value="North Carolina">
                                <option value="North Dakota">
                                <option value="Ohio">
                                <option value="Oklahoma">
                                <option value="Oregon">
                                <option value="Pennsylvania">
                                <option value="Rhode Island">
                                <option value="South Carolina">
                                <option value="South Dakota">
                                <option value="Tennessee">
                                <option value="Utah">
                                <option value="Vermont">
                                <option value="Virginia">
                                <option value="Washington">
                                <option value="West Virginia">
                                <option value="Wisconsin">
                                <option value="Wyoming">
                            </datalist>
                            <button class="state-search-btn" onclick="searchStateCompliance()">
                                <i class="fas fa-search"></i> Check State
                            </button>
                        </div>
                        
                        <div class="popular-states">
                            <span class="state-chip" onclick="quickStateSearch('California')">California</span>
                            <span class="state-chip" onclick="quickStateSearch('New York')">New York</span>
                            <span class="state-chip" onclick="quickStateSearch('Texas')">Texas</span>
                            <span class="state-chip" onclick="quickStateSearch('Florida')">Florida</span>
                            <span class="state-chip" onclick="quickStateSearch('Georgia')">Georgia</span>
                        </div>
                        
                        <div class="state-result" id="stateResult">
                            <div class="state-result-header">
                                <span><i class="fas fa-balance-scale"></i> <span id="selectedStateName"></span> Compliance Information</span>
                                <button class="state-copy-btn" id="stateCopyBtn" onclick="copyStateLink()">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <div class="state-link-container">
                                <span class="state-link-text" id="stateLinkDisplay"></span>
                            </div>
                            <a href="#" id="stateLinkAnchor" target="_blank" class="state-open-btn">
                                <i class="fas fa-external-link-alt"></i> Open in Google Search
                            </a>
                        </div>
                        
                        <div class="state-error" id="stateError">
                            <i class="fas fa-exclamation-triangle"></i> <span id="stateErrorMessage"></span>
                        </div>
                    </div>
                    
                    <!-- COPY LINK SECTION -->
                    <div class="footer-copy-section">
                        <div class="footer-copy-title">
                            <i class="fas fa-link"></i> Share These Links
                        </div>
                        
                        <div class="footer-copy-item">
                            <div class="footer-link-info">
                                <span class="footer-link-title">Compliance Audit</span>
                                <span class="footer-link-url">https://taniad2169.github.io/WS-Audit/</span>
                            </div>
                            <button class="footer-copy-btn" onclick="copyLinkWithFallback('https://taniad2169.github.io/WS-Audit/', this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        
                        <div class="footer-copy-item">
                            <div class="footer-link-info">
                                <span class="footer-link-title">Advertising Links</span>
                                <span class="footer-link-url">https://taniad2169.github.io/WSM-advertising-links/</span>
                            </div>
                            <button class="footer-copy-btn" onclick="copyLinkWithFallback('https://taniad2169.github.io/WSM-advertising-links/', this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        
                        <div class="footer-copy-item">
                            <div class="footer-link-info">
                                <span class="footer-link-title">WebSwan Menu Calendar</span>
                                <span class="footer-link-url">https://webswanmenucalendar.netlify.app/</span>
                            </div>
                            <button class="footer-copy-btn" onclick="copyLinkWithFallback('https://webswanmenucalendar.netlify.app/', this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Privacy Disclaimer -->
                    <div class="privacy-disclaimer">
                        <div class="disclaimer-title">
                            <i class="fas fa-shield-alt"></i> Privacy Commitment
                        </div>
                        <div class="disclaimer-text">
                            <p><i class="fas fa-lock"></i> We collect your information <span class="highlight">only to respond to your inquiries and schedule appointments</span>. Your data is never sold, shared, or rented to any third parties. We respect your privacy and are committed to protecting your personal information.</p>
                            <p style="margin-top: 8px; font-size: 0.85rem;"><i class="fas fa-check-circle" style="color: #28a745;"></i> By submitting this form, you agree to our privacy policy and consent to being contacted regarding your service request.</p>
                        </div>
                    </div>
                    
                    <button class="mobile-back-btn" id="backToCalendarBtn">
                        <i class="fas fa-calendar-alt"></i> <span data-en="Back to Calendar" data-es="Volver al Calendario" data-fr="Retour au Calendrier" data-pt="Voltar ao Calendário" data-ht="Retounen nan Kalandriye">Back to Calendar</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker error:', err));
            });
        }
    </script>

    <!-- PWA INSTALL LOGIC: Android (beforeinstallprompt) + iOS (Safari manual steps) -->
    <script>
        (function() {
            'use strict';

            const banner      = document.getElementById('pwa-install-banner');
            const installBtn  = document.getElementById('pwa-install-btn');
            const dismissBtn  = document.getElementById('pwa-dismiss-btn');
            const fab         = document.getElementById('pwa-fab');
            const iosModal    = document.getElementById('ios-install-modal');
            const iosOverlay  = document.getElementById('ios-modal-overlay');
            const iosCloseBtn = document.getElementById('ios-close-btn');

            const STORAGE_KEY = 'webswan_pwa_dismissed';

            function isIOS() {
                return /iphone|ipad|ipod/i.test(navigator.userAgent) ||
                       (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
            }

            function isInStandaloneMode() {
                return window.matchMedia('(display-mode: standalone)').matches ||
                       window.navigator.standalone === true;
            }

            function wasDismissed() {
                try {
                    const ts = localStorage.getItem(STORAGE_KEY);
                    if (!ts) return false;
                    return (Date.now() - parseInt(ts)) < 7 * 24 * 60 * 60 * 1000;
                } catch(e) { return false; }
            }

            function markDismissed() {
                try { localStorage.setItem(STORAGE_KEY, Date.now()); } catch(e) {}
            }

            function showBanner() {
                banner.classList.add('show');
                document.body.classList.add('pwa-banner-open');
            }

            function hideBanner() {
                banner.classList.remove('show');
                document.body.classList.remove('pwa-banner-open');
            }

            function showFAB() { fab.classList.add('show'); fab.style.display = 'flex'; }
            function hideFAB()  { fab.classList.remove('show'); fab.style.display = 'none'; }

            function showIOSModal() {
                iosModal.classList.add('show');
                iosOverlay.classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            function hideIOSModal() {
                iosModal.classList.remove('show');
                iosOverlay.classList.remove('show');
                document.body.style.overflow = '';
            }

            // Already installed as app — don't show anything
            if (isInStandaloneMode()) return;

            // Already dismissed recently — don't nag
            if (wasDismissed()) return;

            // ---- ANDROID / CHROME / EDGE ----
            let deferredPrompt = null;

            window.addEventListener('beforeinstallprompt', function(e) {
                e.preventDefault();
                deferredPrompt = e;
                setTimeout(showBanner, 1500);
            });

            installBtn && installBtn.addEventListener('click', async function() {
                if (!deferredPrompt) return;
                hideBanner();
                deferredPrompt.prompt();
                const result = await deferredPrompt.userChoice;
                console.log('PWA install outcome:', result.outcome);
                deferredPrompt = null;
                if (result.outcome === 'dismissed') markDismissed();
            });

            dismissBtn && dismissBtn.addEventListener('click', function() {
                hideBanner();
                markDismissed();
                if (deferredPrompt) showFAB();
            });

            fab && fab.addEventListener('click', function() {
                if (deferredPrompt) { hideFAB(); showBanner(); }
                else if (isIOS()) { hideFAB(); showIOSModal(); }
            });

            window.addEventListener('appinstalled', function() {
                hideBanner(); hideFAB(); deferredPrompt = null;
                console.log('WebSwan PWA installed successfully!');
            });

            // ---- iOS / SAFARI ----
            // beforeinstallprompt doesn't fire on iOS, so we show
            // a step-by-step modal guiding them to use Share > Add to Home Screen
            if (isIOS() && !isInStandaloneMode() && !wasDismissed()) {
                setTimeout(showIOSModal, 2000);
            }

            iosCloseBtn && iosCloseBtn.addEventListener('click', function() {
                hideIOSModal(); markDismissed(); showFAB();
            });

            iosOverlay && iosOverlay.addEventListener('click', function() {
                hideIOSModal(); markDismissed(); showFAB();
            });

        })();
    </script>

    <script>
        // ============================================
        // SCROLL FUNCTIONS FOR INSTRUCTION BUTTONS
        // ============================================
        
        function scrollToCalendar() {
            const calendarElement = document.getElementById('calendarSection');
            if (calendarElement) {
                const offset = 100;
                const elementPosition = calendarElement.getBoundingClientRect().top + window.pageYOffset;
                window.scrollTo({
                    top: elementPosition - offset,
                    behavior: 'smooth'
                });
            }
        }
        
        function scrollToService() {
            const serviceElement = document.getElementById('serviceSection');
            if (serviceElement) {
                const offset = 100;
                const elementPosition = serviceElement.getBoundingClientRect().top + window.pageYOffset;
                window.scrollTo({
                    top: elementPosition - offset,
                    behavior: 'smooth'
                });
                
                setTimeout(() => {
                    checkAndShowEstimateModal();
                }, 500);
            }
        }

        // ============================================
        // STATE COMPLIANCE SEARCH FUNCTION
        // ============================================
        
        const stateComplianceLinks = {
            'california': {
                name: 'California',
                url: 'https://www.google.com/search?q=state+of+california+website+compliance+penalty'
            },
            'new york': {
                name: 'New York',
                url: 'https://www.google.com/search?q=state+of+new+york+website+compliance+penalty'
            },
            'texas': {
                name: 'Texas',
                url: 'https://www.google.com/search?q=state+of+texas+website+compliance+penalty'
            },
            'florida': {
                name: 'Florida',
                url: 'https://www.google.com/search?q=state+of+florida+website+compliance+penalty'
            },
            'georgia': {
                name: 'Georgia',
                url: 'https://www.google.com/search?q=state+of+georgia+website+compliance+penalty'
            }
        };
        
        let currentStateLink = '';
        let currentStateName = '';
        
        function searchStateCompliance() {
            const stateInput = document.getElementById('stateInput');
            const stateValue = stateInput.value.trim().toLowerCase();
            const stateResult = document.getElementById('stateResult');
            const stateError = document.getElementById('stateError');
            const errorMessage = document.getElementById('stateErrorMessage');
            const stateNameSpan = document.getElementById('selectedStateName');
            const linkDisplay = document.getElementById('stateLinkDisplay');
            const linkAnchor = document.getElementById('stateLinkAnchor');
            
            stateResult.classList.remove('show');
            stateError.classList.remove('show');
            
            if (!stateValue) {
                errorMessage.innerText = 'Please enter a state name';
                stateError.classList.add('show');
                return;
            }
            
            let matchedState = null;
            
            for (const [key, data] of Object.entries(stateComplianceLinks)) {
                if (stateValue === key || stateValue.includes(key) || key.includes(stateValue)) {
                    matchedState = data;
                    break;
                }
            }
            
            if (matchedState) {
                currentStateLink = matchedState.url;
                currentStateName = matchedState.name;
                stateNameSpan.textContent = matchedState.name;
                linkDisplay.textContent = matchedState.url;
                linkAnchor.href = matchedState.url;
                stateResult.classList.add('show');
            } else {
                const formattedState = stateInput.value.trim();
                const searchQuery = `state+of+${formattedState.toLowerCase().replace(/ /g, '+')}+website+compliance+penalty`;
                const genericUrl = `https://www.google.com/search?q=${searchQuery}`;
                
                currentStateLink = genericUrl;
                currentStateName = formattedState;
                stateNameSpan.textContent = formattedState;
                linkDisplay.textContent = genericUrl;
                linkAnchor.href = genericUrl;
                stateResult.classList.add('show');
            }
            
            setTimeout(() => {
                stateResult.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }
        
        function quickStateSearch(state) {
            document.getElementById('stateInput').value = state;
            searchStateCompliance();
        }
        
        function copyStateLink() {
            if (!currentStateLink) {
                alert('Please search for a state first');
                return;
            }
            
            const copyBtn = document.getElementById('stateCopyBtn');
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(currentStateLink).then(() => {
                    const originalIcon = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i>';
                    copyBtn.classList.add('copied');
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
                        copyBtn.classList.remove('copied');
                    }, 2000);
                }).catch(err => {
                    fallbackCopyStateLink(copyBtn);
                });
            } else {
                fallbackCopyStateLink(copyBtn);
            }
        }
        
        function fallbackCopyStateLink(copyBtn) {
            const textarea = document.createElement('textarea');
            textarea.value = currentStateLink;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            textarea.style.left = '-999999px';
            textarea.style.top = '-999999px';
            document.body.appendChild(textarea);
            textarea.focus();
            textarea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    const originalIcon = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i>';
                    copyBtn.classList.add('copied');
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
                        copyBtn.classList.remove('copied');
                    }, 2000);
                } else {
                    prompt('Copy this link manually:', currentStateLink);
                }
            } catch (err) {
                prompt('Copy this link manually:', currentStateLink);
            }
            
            document.body.removeChild(textarea);
        }

        // ============================================
        // COPY LINK FUNCTION WITH FALLBACK
        // ============================================
        
        function copyLinkWithFallback(link, buttonElement) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(link).then(() => {
                    showCopySuccess(buttonElement);
                }).catch(err => {
                    fallbackCopy(link, buttonElement);
                });
            } else {
                fallbackCopy(link, buttonElement);
            }
        }
        
        function fallbackCopy(link, buttonElement) {
            const textarea = document.createElement('textarea');
            textarea.value = link;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            textarea.style.left = '-999999px';
            textarea.style.top = '-999999px';
            document.body.appendChild(textarea);
            textarea.focus();
            textarea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess(buttonElement);
                } else {
                    prompt('Copy this link manually:', link);
                }
            } catch (err) {
                prompt('Copy this link manually:', link);
            }
            
            document.body.removeChild(textarea);
        }
        
        function showCopySuccess(buttonElement) {
            const originalIcon = buttonElement.innerHTML;
            buttonElement.innerHTML = '<i class="fas fa-check"></i>';
            buttonElement.classList.add('copied');
            setTimeout(() => {
                buttonElement.innerHTML = originalIcon;
                buttonElement.classList.remove('copied');
            }, 2000);
        }

        // ============================================
        // LANGUAGE TRANSLATION SYSTEM
        // ============================================
        
        let currentLanguage = 'en';
        
        function translateFullPage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('[data-en]').forEach(element => {
                const translation = element.getAttribute(`data-${lang}`);
                if (translation) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        const placeholderAttr = element.getAttribute(`data-${lang}-placeholder`);
                        if (placeholderAttr) {
                            element.placeholder = placeholderAttr;
                        }
                    } else {
                        element.textContent = translation;
                    }
                }
            });
            
            document.querySelectorAll('select option').forEach(option => {
                const translation = option.getAttribute(`data-${lang}`);
                if (translation) {
                    option.textContent = translation;
                }
            });
        }

        // ============================================
        // ESTIMATE CALCULATOR FUNCTIONS
        // ============================================
        
        let hasSelectedService = false;
        let hasCompletedEstimate = false;
        let selectedDate = null;
        let selectedTime = null;
        let selectedTimeValue = null;
        let lastCalculatedTotal = 0;
        let lastCalculatedMonthly = 0;
        let currentPromoCode = '';
        let currentPromoDiscount = 0;
        let complianceOptOut = false;
        let complianceOnly = false;
        
        let promoDatabase = {
            'WELCOME10': { discount: 10, type: 'percentage', message: '10% off!' },
            'SAVE20': { discount: 20, type: 'percentage', message: '20% off!' },
            'FREEDEMO': { discount: 0, type: 'free-demo', message: 'Free Demo included!' },
            'SPECIAL50': { discount: 50, type: 'fixed', message: '$50 off!' },
            'COMPLY2026': { discount: 39, type: 'fixed', message: '$39 off compliance fee!' }
        };
        
        const WORK_START_HOUR = 10;
        const WORK_END_HOUR = 20;
        const WORK_DAYS = [1, 2, 3, 4, 5];
        const PHONE_NUMBER = "4158770687";
        
        const pricingData = {
            'website-demo-free': 0,
            'start-up-custom-web-design': 999,
            'landing-page': 1599,
            'language-translator': 150,
            'custom-logo-design': 195,
            'custom-qr-code': 55,
            'reputation-management': 109,
            'ad-campaign-video': 799,
            'additional-link-start-up': 300,
            'seo-content': 350,
            'form-calendar': 450,
            'form-calendar-combined': 800,
            'pwa-phone-app': 899,
            'full-page-promotion': 559,
            'section-promotion': 499,
            'weekly-promotion': 89,
            'weekly-setup': 250,
            'interactive-brand-hub': 699,
            'brand-hub-monthly': 39,
            'campaign-video-optional': 450,
            'compliance-banner-setup': 399,
            'compliance-banner-monthly': 39,
            'monthly-maintenance': 39,
            'real-estate-lead-form': 150,
            'lead-gen-form': 150,
            'pwa-phone-app-new': 969,
            'pwa-phone-app-monthly': 69
        };
        
        const monthlyRates = {
            'startup': 109,
            'premium': 109,
            'landing-page': 89,
            'free-demo': 0,
            'compliance-only': 39
        };
        
        function loadEstimateCalculator() {
            const estimateHTML = `
                <div class="estimate-calculator">
                    <div class="pricing-card">
                        <h3>Pricing Menu</h3>
                        <div class="pricing-grid">
                            <div class="pricing-item"><p>Website Demo</p><span>FREE</span></div>
                            <div class="pricing-item"><p>Start-up Custom Web Design</p><span>$999</span></div>
                            <div class="pricing-item"><p>Landing Page</p><span>$1,599</span></div>
                            <div class="pricing-item"><p>Language Translator</p><span>$150</span></div>
                            <div class="pricing-item"><p>Custom Logo Design</p><span>$195</span></div>
                            <div class="pricing-item"><p>Custom QR Code</p><span>$55</span></div>
                            <div class="pricing-item"><p>Reputation Management</p><span>$109/month</span></div>
                            <div class="pricing-item"><p>Ad Campaign Video</p><span>$799</span></div>
                            <div class="pricing-item"><p>Additional Link on Start-up</p><span>$300</span></div>
                            <div class="pricing-item"><p>SEO Content</p><span>$350</span></div>
                            <div class="pricing-item"><p>Form or Calendar</p><span>$450</span></div>
                            <div class="pricing-item"><p>Form & Calendar Combined</p><span>$800</span></div>
                            <div class="pricing-item"><p>PWA Phone App Start-up</p><span>$899</span></div>
                            <div class="pricing-item"><p>Full Page Promotion</p><span>$559 setup + $197/month</span></div>
                            <div class="pricing-item"><p>Section Promotion</p><span>$499 setup + $109/month</span></div>
                            <div class="pricing-item"><p>Weekly Promotion</p><span>$250 setup + $89/week</span></div>
                            <div class="pricing-item"><p>Interactive Brand Hub</p><span>$699 setup + $39/month</span></div>
                            <div class="pricing-item"><p>⚖️ Compliance Banner</p><span>$399 setup + $39/month</span></div>
                            <div class="pricing-item"><p>🏠 Real Estate Lead Form</p><span>$150 one-time</span></div>
                            <div class="pricing-item"><p>📋 Additional Lead Gen Form</p><span>$150 per form</span></div>
                            <div class="pricing-item"><p>📱 PWA Phone Application</p><span>$969 + $69/month</span></div>
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9rem; color: #28a745;"><i class="fas fa-check-circle"></i> If you have a website with us, the set-up fee for advertising is waived! You only pay the monthly subscription.</p>
                    </div>

                    <div class="section">
                        <h3>📋 Select Service Type</h3>
                        <label><input type="radio" name="modalServiceType" value="startup" checked> Start-up Package <span style="color: #666; font-size: 0.85rem;">($109/month)</span></label>
                        <label><input type="radio" name="modalServiceType" value="premium"> Premium Package <span style="color: #666; font-size: 0.85rem;">($109/month)</span></label>
                        <label><input type="radio" name="modalServiceType" value="landing-page"> 📄 Landing Page <span style="color: #666; font-size: 0.85rem;">($89/month)</span></label>
                        <label><input type="radio" name="modalServiceType" value="free-demo"> 🎁 Free Demo</label>
                        <label><input type="radio" name="modalServiceType" value="compliance-only"> ⚖️ Compliance Banner Only <span style="color: #666; font-size: 0.85rem;">($39/month)</span></label>
                    </div>

                    <div class="compliance-section" id="complianceSection">
                        <h4><i class="fas fa-gavel"></i> ⚖️ Website Compliance Banner (Mandatory for 2026)</h4>
                        <p><strong>Important:</strong> All new websites and landing pages created in 2026 must include compliance banners to meet state regulations and avoid penalties.</p>
                        <p><i class="fas fa-info-circle"></i> Compliance Banner: <strong>$399 setup + $39/month</strong></p>
                        <label>
                            <input type="checkbox" id="optOutCompliance" onchange="toggleComplianceOptOut()">
                            I opt-out of compliance banners and accept full responsibility for any penalties or legal issues. (Must sign disclaimer)
                        </label>
                        <div class="compliance-warning" id="complianceWarning">
                            <i class="fas fa-exclamation-triangle"></i> You have opted out of compliance banners. You will be required to sign a disclaimer accepting full legal responsibility for your website.
                        </div>
                    </div>

                    <div class="section">
                        <h3>📊 Advertising Options</h3>
                        <label><input type="checkbox" id="modalFullPagePromo"> Full Page Promotion ($559 setup + $197/month)</label>
                        <label><input type="checkbox" id="modalSectionPromo"> Section Promotion ($499 setup + $109/month)</label>
                        <label><input type="checkbox" id="modalWeeklyPromo"> Weekly Promotion ($250 setup + $89/week)</label>
                        <label><input type="checkbox" id="modalBrandHub"> Interactive Brand Hub ($699 setup + $39/month)</label>
                        <label><input type="checkbox" id="modalCampaignVideo"> Campaign Video (+$450 one-time)</label>
                    </div>

                    <div class="section">
                        <h3>➕ Additional Services</h3>
                        <label><input type="checkbox" id="modalAdditionalLink"> Additional Link (+$300)</label>
                        <label><input type="checkbox" id="modalSEOContent"> SEO Content (+$350)</label>
                        <label><input type="checkbox" id="modalForm"> Form (+$450)</label>
                        <label><input type="checkbox" id="modalCalendar"> Calendar (+$450)</label>
                        <label><input type="checkbox" id="modalFormCalendarCombined"> Form & Calendar Combined (+$800)</label>
                        <label><input type="checkbox" id="modalTranslator"> Language Translator (+$150)</label>
                        <label><input type="checkbox" id="modalLogo"> Custom Logo (+$195)</label>
                        <label><input type="checkbox" id="modalQR"> Custom QR Code (+$55)</label>
                        <label><input type="checkbox" id="modalReputation"> Reputation Management (+$109/month)</label>
                        <label><input type="checkbox" id="modalRealEstateForm"> 🏠 Real Estate Lead Form (+$150)</label>
                        <label><input type="checkbox" id="modalLeadGenForm"> 📋 Additional Lead Generation Form (+$150)</label>
                        <label><input type="checkbox" id="modalPwaApp"> 📱 PWA Phone Application (+$969 + $69/month)</label>
                    </div>

                    <div class="promo-section">
                        <h4><i class="fas fa-tag"></i> Special Promotion / Discount Code</h4>
                        <div class="promo-input-group">
                            <input type="text" id="promoCodeInput" placeholder="Enter promo code">
                            <button id="applyPromoBtn" onclick="applyPromoCode()">Apply</button>
                        </div>
                        <div class="promo-message" id="promoMessage"></div>
                        <div class="promo-saved" id="promoSaved"></div>
                    </div>

                    <button class="calc-btn" id="modalCalculateBtn">Calculate Estimate</button>

                    <div class="result-box" id="resultBox">
                        Setup Fee: $<span id="modalEstimate">0</span>
                    </div>
                    
                    <div class="monthly-payment-box" id="monthlyPaymentBox" style="display: none;">
                        Monthly Payment: $<span id="modalMonthly">0</span>/month
                    </div>
                    
                    <button class="modal-sms-btn" id="modalSmsBtn" style="display: none;">
                        <i class="fas fa-comment-alt"></i> Click here to send appointment request
                        <span class="phone-number">📱 (415) 877-0687</span>
                    </button>
                    
                    <div class="footnote">*Estimate based on selected services. Compliance banners are mandatory for all websites and landing pages in 2026 unless opt-out disclaimer is signed.</div>
                </div>
            `;
            
            document.getElementById('estimateModalBody').innerHTML = estimateHTML;
            document.getElementById('modalCalculateBtn').onclick = function() { calculateModalEstimate(); };
            document.getElementById('modalSmsBtn').onclick = function() { sendAppointmentSMS(); };
            complianceOptOut = false;
            complianceOnly = false;
        }

        function toggleComplianceOptOut() {
            const optOutCheckbox = document.getElementById('optOutCompliance');
            const warning = document.getElementById('complianceWarning');
            complianceOptOut = optOutCheckbox.checked;
            if (complianceOptOut) {
                warning.classList.add('show');
            } else {
                warning.classList.remove('show');
            }
        }

        function applyPromoCode() {
            const promoInput = document.getElementById('promoCodeInput').value.toUpperCase().trim();
            const promoMessage = document.getElementById('promoMessage');
            const promoSaved = document.getElementById('promoSaved');
            
            if (promoDatabase[promoInput]) {
                const promo = promoDatabase[promoInput];
                currentPromoCode = promoInput;
                
                if (promo.type === 'percentage') {
                    currentPromoDiscount = promo.discount;
                    promoMessage.className = 'promo-message success';
                    promoMessage.innerHTML = `✅ ${promo.message} Applied!`;
                    promoSaved.innerHTML = `You save ${promo.discount}% on your estimate!`;
                } else if (promo.type === 'fixed') {
                    currentPromoDiscount = promo.discount;
                    promoMessage.className = 'promo-message success';
                    promoMessage.innerHTML = `✅ $${promo.discount} off applied!`;
                    promoSaved.innerHTML = `You save $${promo.discount}!`;
                } else if (promo.type === 'free-demo') {
                    currentPromoDiscount = 0;
                    promoMessage.className = 'promo-message success';
                    promoMessage.innerHTML = `✅ Free Demo included!`;
                    promoSaved.innerHTML = `Free Demo has been added to your appointment!`;
                    const freeDemoRadio = document.querySelector('input[value="free-demo"]');
                    if (freeDemoRadio) freeDemoRadio.checked = true;
                }
            } else {
                promoMessage.className = 'promo-message error';
                promoMessage.innerHTML = '❌ Invalid promo code';
                promoSaved.innerHTML = '';
                currentPromoCode = '';
                currentPromoDiscount = 0;
            }
        }

        function requiresCompliance(serviceType) {
            return serviceType === 'startup' || serviceType === 'premium' || serviceType === 'landing-page';
        }

        function hasWebDesignService() {
            const serviceType = document.querySelector('input[name="modalServiceType"]:checked').value;
            return serviceType === 'startup' || serviceType === 'premium' || serviceType === 'landing-page';
        }

        function calculateModalEstimate() {
            let total = 0;
            let monthlyTotal = 0;
            
            let serviceType = document.querySelector('input[name="modalServiceType"]:checked').value;
            complianceOnly = (serviceType === 'compliance-only');
            const hasWebsite = hasWebDesignService();
            
            if (serviceType === "startup") {
                total += pricingData['start-up-custom-web-design'];
                monthlyTotal += monthlyRates['startup'];
            } else if (serviceType === "premium") {
                total += pricingData['start-up-custom-web-design'] + 500;
                monthlyTotal += monthlyRates['premium'];
            } else if (serviceType === "landing-page") {
                total += pricingData['landing-page'];
                monthlyTotal += monthlyRates['landing-page'];
            } else if (serviceType === "free-demo") {
                total += 0;
                monthlyTotal += 0;
            } else if (serviceType === "compliance-only") {
                total += pricingData['compliance-banner-setup'];
                monthlyTotal += pricingData['compliance-banner-monthly'];
            }
            
            if (requiresCompliance(serviceType) && !complianceOptOut) {
                total += pricingData['compliance-banner-setup'];
                monthlyTotal += pricingData['compliance-banner-monthly'];
            }
            
            if (document.getElementById("modalFullPagePromo") && document.getElementById("modalFullPagePromo").checked) {
                if (hasWebsite) { monthlyTotal += 197; } else { total += pricingData['full-page-promotion']; monthlyTotal += 197; }
            }
            if (document.getElementById("modalSectionPromo") && document.getElementById("modalSectionPromo").checked) {
                if (hasWebsite) { monthlyTotal += 109; } else { total += pricingData['section-promotion']; monthlyTotal += 109; }
            }
            if (document.getElementById("modalWeeklyPromo") && document.getElementById("modalWeeklyPromo").checked) {
                if (hasWebsite) { monthlyTotal += 89; } else { total += pricingData['weekly-setup']; }
            }
            if (document.getElementById("modalBrandHub") && document.getElementById("modalBrandHub").checked) {
                if (hasWebsite) { monthlyTotal += 39; } else { total += pricingData['interactive-brand-hub']; monthlyTotal += 39; }
            }
            if (document.getElementById("modalCampaignVideo") && document.getElementById("modalCampaignVideo").checked) total += pricingData['campaign-video-optional'];
            if (document.getElementById("modalAdditionalLink") && document.getElementById("modalAdditionalLink").checked) total += pricingData['additional-link-start-up'];
            if (document.getElementById("modalSEOContent") && document.getElementById("modalSEOContent").checked) total += pricingData['seo-content'];
            if (document.getElementById("modalForm") && document.getElementById("modalForm").checked) total += pricingData['form-calendar'];
            if (document.getElementById("modalCalendar") && document.getElementById("modalCalendar").checked) total += pricingData['form-calendar'];
            if (document.getElementById("modalFormCalendarCombined") && document.getElementById("modalFormCalendarCombined").checked) total += pricingData['form-calendar-combined'];
            if (document.getElementById("modalTranslator") && document.getElementById("modalTranslator").checked) total += pricingData['language-translator'];
            if (document.getElementById("modalLogo") && document.getElementById("modalLogo").checked) total += pricingData['custom-logo-design'];
            if (document.getElementById("modalQR") && document.getElementById("modalQR").checked) total += pricingData['custom-qr-code'];
            if (document.getElementById("modalReputation") && document.getElementById("modalReputation").checked) { total += pricingData['reputation-management']; monthlyTotal += 109; }
            if (document.getElementById("modalRealEstateForm") && document.getElementById("modalRealEstateForm").checked) total += pricingData['real-estate-lead-form'];
            if (document.getElementById("modalLeadGenForm") && document.getElementById("modalLeadGenForm").checked) total += pricingData['lead-gen-form'];
            if (document.getElementById("modalPwaApp") && document.getElementById("modalPwaApp").checked) { total += pricingData['pwa-phone-app-new']; monthlyTotal += pricingData['pwa-phone-app-monthly']; }

            if (currentPromoCode && currentPromoDiscount > 0) {
                const promo = promoDatabase[currentPromoCode];
                if (promo.type === 'percentage') {
                    const discountAmount = Math.round(total * (promo.discount / 100));
                    total = total - discountAmount;
                    document.getElementById('promoSaved').innerHTML = `🎉 Promo applied: You saved $${discountAmount}!`;
                } else if (promo.type === 'fixed') {
                    total = Math.max(0, total - promo.discount);
                    document.getElementById('promoSaved').innerHTML = `🎉 Promo applied: You saved $${promo.discount}!`;
                }
            }

            document.getElementById("modalEstimate").innerText = total;
            lastCalculatedTotal = total;
            lastCalculatedMonthly = monthlyTotal;
            
            const monthlyBox = document.getElementById('monthlyPaymentBox');
            if (monthlyTotal > 0) {
                document.getElementById('modalMonthly').innerText = monthlyTotal;
                monthlyBox.style.display = 'block';
            } else {
                monthlyBox.style.display = 'none';
            }
            
            hasCompletedEstimate = true;
            
            const resultBox = document.getElementById('resultBox');
            resultBox.classList.add('highlight');
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
            setTimeout(() => { resultBox.classList.remove('highlight'); }, 1500);
            
            const smsBtn = document.getElementById('modalSmsBtn');
            smsBtn.style.display = 'flex';
            setTimeout(() => { smsBtn.scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 500);
        }

        function sendAppointmentSMS() {
            const dateDisplay = document.getElementById('displayDate').textContent;
            const timeDisplay = document.getElementById('displayTime').textContent;
            
            if (!dateDisplay || dateDisplay === '' || !timeDisplay || timeDisplay.includes('[Select Time]')) {
                alert('Please select a date and time for your appointment first!');
                document.getElementById('estimateModal').style.display = 'none';
                return;
            }
            
            const service = document.getElementById('appointmentReason').value;
            if (!service) {
                alert('Please select a service!');
                document.getElementById('estimateModal').style.display = 'none';
                return;
            }
            
            const designLabels = {
                'web-design': 'Web Design', 'landing-page': 'Landing Page',
                'custom-uiux': 'Custom UI/UX Web Design', 'pwa-app': 'PWA Phone Application',
                'calendar': 'Calendar', 'form': 'Form', 'free-demo': 'Free Demo',
                'ad-campaign-video': 'Ad Campaign Video', 'ad-campaign-script': 'Ad Campaign Script',
                'advertising': 'Advertising', 'seo': 'SEO Services',
                'reputation': 'Reputation Management', 'brand-hub': 'Interactive Brand Hub',
                'compliance': 'Compliance Banner Only'
            };
            const designText = designLabels[service] || service;
            
            const estimateSpan = document.getElementById('modalEstimate');
            const estimateValue = estimateSpan ? estimateSpan.innerText : '0';
            const monthlySpan = document.getElementById('modalMonthly');
            const monthlyValue = monthlySpan ? monthlySpan.innerText : '0';
            
            let smsMessage = `WebSwan Appointment Request%0A`;
            smsMessage += `Date: ${dateDisplay}%0A`;
            smsMessage += `Time: ${timeDisplay}%0A`;
            if (designText) smsMessage += `Service: ${designText}%0A`;
            if (estimateValue && estimateValue !== '0') smsMessage += `Setup Fee: $${estimateValue}%0A`;
            if (monthlyValue && monthlyValue !== '0') smsMessage += `Monthly: $${monthlyValue}/month%0A`;
            if (complianceOptOut) smsMessage += `⚠️ Compliance Opt-Out Selected - Disclaimer Required%0A`;
            if (currentPromoCode) smsMessage += `Promo Code: ${currentPromoCode}%0A`;
            smsMessage += `Please confirm this appointment.`;
            
            const smsLink = `sms:${PHONE_NUMBER}?body=${smsMessage}`;
            
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                window.location.href = smsLink;
            } else {
                alert(`📱 Send this SMS to: ${PHONE_NUMBER}\n\nMessage:\n${decodeURIComponent(smsMessage.replace(/%0A/g, '\n'))}\n\nClick OK to copy to clipboard.`);
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(decodeURIComponent(smsMessage.replace(/%0A/g, '\n'))).then(() => {
                        alert(`✅ Message copied to clipboard!\n\nYou can now paste it into your messaging app to send to ${PHONE_NUMBER}`);
                    });
                }
            }
            
            setTimeout(() => { document.getElementById('estimateModal').style.display = 'none'; }, 1000);
        }

        // ============================================
        // APPOINTMENT DROPDOWN & QUESTION FORM
        // ============================================
        
        function handleAppointmentSelection(value) {
            console.log('Selected service:', value);
        }

        function toggleOtherServiceQuestion(value) {
            const otherContainer = document.getElementById('otherQuestionContainer');
            if (value === 'other') {
                otherContainer.classList.add('show');
            } else {
                otherContainer.classList.remove('show');
            }
        }

        // ============================================
        // CALENDAR AND APPOINTMENT LOGIC
        // ============================================
        
        let currentDate = new Date();
        const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
        
        function isWeekend(date) {
            const day = date.getDay();
            return day === 0 || day === 6;
        }
        
        function isPastDate(date) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            return date < today;
        }
        
        function isWorkDay(date) {
            const day = date.getDay();
            const workDayFormat = day === 0 ? 7 : day;
            return WORK_DAYS.includes(workDayFormat);
        }
        
        function updateSelectedDisplay() {
            if (selectedDate && selectedTime) {
                document.getElementById('selectedDateDisplay').style.display = 'block';
            }
        }

        function renderCalendar() {
            const calendarDays = document.getElementById('calendarDays');
            const currentMonthElement = document.getElementById('currentMonth');
            const timeSlotsContainer = document.getElementById('timeSlotsContainer');
            
            const days = calendarDays.querySelectorAll('.calendar-date, .empty-day');
            days.forEach(d => d.remove());

            const currentYear = currentDate.getFullYear();
            const currentMonth = currentDate.getMonth();
            
            currentMonthElement.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const lastDate = new Date(currentYear, currentMonth + 1, 0).getDate();

            for(let i = 0; i < firstDay; i++) {
                const empty = document.createElement('div');
                empty.className = 'empty-day';
                calendarDays.appendChild(empty);
            }

            for(let i = 1; i <= lastDate; i++) {
                const dateDiv = document.createElement('div');
                dateDiv.className = 'calendar-date';
                dateDiv.textContent = i;
                
                const cellDate = new Date(currentYear, currentMonth, i);
                
                if (isWeekend(cellDate) || isPastDate(cellDate) || !isWorkDay(cellDate)) {
                    dateDiv.classList.add('disabled');
                } else {
                    dateDiv.onclick = () => {
                        document.querySelectorAll('.calendar-date').forEach(d => d.classList.remove('selected'));
                        dateDiv.classList.add('selected');
                        selectedDate = `${monthNames[currentMonth]} ${i}, ${currentYear}`;
                        document.getElementById('displayDate').textContent = selectedDate;
                        
                        selectedTime = null;
                        selectedTimeValue = null;
                        document.querySelectorAll('.time-slot').forEach(ts => ts.classList.remove('selected'));
                        document.getElementById('displayTime').textContent = '[Select Time]';
                        
                        timeSlotsContainer.style.display = 'block';
                        updateSelectedDisplay();
                        
                        setTimeout(() => {
                            const timeSlotsElement = document.getElementById('timeSlotsContainer');
                            const offset = 80;
                            const elementPosition = timeSlotsElement.getBoundingClientRect().top + window.pageYOffset;
                            window.scrollTo({ top: elementPosition - offset, behavior: 'smooth' });
                        }, 100);
                        
                        checkAndShowEstimateModal();
                    };
                }
                
                calendarDays.appendChild(dateDiv);
            }
        }

        function generateTimeSlots() {
            const timeSlotsGrid = document.getElementById('timeSlotsGrid');
            timeSlotsGrid.innerHTML = '';
            
            for (let hour = WORK_START_HOUR; hour < WORK_END_HOUR; hour++) {
                const timeLabel1 = hour <= 12 ? `${hour}:00 ${hour === 12 ? 'PM' : 'AM'}` : `${hour - 12}:00 PM`;
                const timeSlot1 = document.createElement('div');
                timeSlot1.className = 'time-slot';
                timeSlot1.textContent = timeLabel1;
                timeSlot1.dataset.time = `${hour}:00`;
                
                timeSlot1.onclick = function() {
                    document.querySelectorAll('.time-slot').forEach(ts => ts.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTime = this.textContent;
                    selectedTimeValue = this.dataset.time;
                    document.getElementById('displayTime').textContent = this.textContent;
                    updateSelectedDisplay();
                    
                    setTimeout(() => {
                        const serviceElement = document.getElementById('serviceSection');
                        const offset = 80;
                        const elementPosition = serviceElement.getBoundingClientRect().top + window.pageYOffset;
                        window.scrollTo({ top: elementPosition - offset, behavior: 'smooth' });
                    }, 100);
                    
                    checkAndShowEstimateModal();
                };
                
                timeSlotsGrid.appendChild(timeSlot1);
                
                const timeLabel2 = hour < 12 ? `${hour}:45 AM` : 
                                  hour === 12 ? `12:45 PM` : 
                                  hour === 19 ? `7:45 PM` : 
                                  `${hour - 12}:45 PM`;
                const timeSlot2 = document.createElement('div');
                timeSlot2.className = 'time-slot';
                timeSlot2.textContent = timeLabel2;
                timeSlot2.dataset.time = `${hour}:45`;
                
                timeSlot2.onclick = function() {
                    document.querySelectorAll('.time-slot').forEach(ts => ts.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTime = this.textContent;
                    selectedTimeValue = this.dataset.time;
                    document.getElementById('displayTime').textContent = this.textContent;
                    updateSelectedDisplay();
                    
                    setTimeout(() => {
                        const serviceElement = document.getElementById('serviceSection');
                        const offset = 80;
                        const elementPosition = serviceElement.getBoundingClientRect().top + window.pageYOffset;
                        window.scrollTo({ top: elementPosition - offset, behavior: 'smooth' });
                    }, 100);
                    
                    checkAndShowEstimateModal();
                };
                
                timeSlotsGrid.appendChild(timeSlot2);
            }
        }

        function checkAndShowEstimateModal() {
            const serviceSelect = document.getElementById('appointmentReason');
            if (serviceSelect.value) {
                loadEstimateCalculator();
                document.getElementById('estimateModal').style.display = 'flex';
            }
        }

        document.getElementById('prevMonth').onclick = () => { 
            const newDate = new Date(currentDate);
            newDate.setMonth(newDate.getMonth() - 1);
            currentDate = newDate;
            renderCalendar(); 
            document.getElementById('timeSlotsContainer').style.display = 'none';
        };
        
        document.getElementById('nextMonth').onclick = () => { 
            const newDate = new Date(currentDate);
            newDate.setMonth(newDate.getMonth() + 1);
            currentDate = newDate;
            renderCalendar(); 
            document.getElementById('timeSlotsContainer').style.display = 'none';
        };

        document.getElementById('appointmentReason').onchange = function() {
            if (this.value) { checkAndShowEstimateModal(); }
        };

        document.getElementById('closeEstimateModal').onclick = function() {
            document.getElementById('estimateModal').style.display = 'none';
        };

        window.onclick = function(event) {
            const modal = document.getElementById('estimateModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        };

        // Mobile navigation
        const formWrapper = document.getElementById('formWrapper');
        const navToAppointment = document.getElementById('navToAppointment');
        const navToQuestion = document.getElementById('navToQuestion');
        const backToCalendarBtn = document.getElementById('backToCalendarBtn');

        let isMobile = window.innerWidth <= 900;

        window.addEventListener('resize', function() {
            isMobile = window.innerWidth <= 900;
            if (!isMobile) {
                formWrapper.style.transform = 'none';
            }
        });

        function slideToAppointment() {
            if (isMobile) {
                formWrapper.style.transform = 'translateX(0)';
                navToAppointment.classList.add('active');
                navToQuestion.classList.remove('active');
                
                setTimeout(() => {
                    const calendarElement = document.getElementById('calendarSection');
                    if (calendarElement) {
                        const offset = 80;
                        const elementPosition = calendarElement.getBoundingClientRect().top + window.pageYOffset;
                        window.scrollTo({ top: elementPosition - offset, behavior: 'smooth' });
                    }
                }, 300);
            } else {
                document.getElementById('appointmentSection').scrollIntoView({ behavior: 'smooth' });
            }
            window.history.pushState(null, null, '#appointment');
        }

        function slideToQuestion() {
            if (isMobile) {
                formWrapper.style.transform = 'translateX(-50%)';
                navToAppointment.classList.remove('active');
                navToQuestion.classList.add('active');
            } else {
                document.getElementById('question').scrollIntoView({ behavior: 'smooth' });
            }
            window.history.pushState(null, null, '#question');
        }

        navToAppointment.addEventListener('click', slideToAppointment);
        navToQuestion.addEventListener('click', slideToQuestion);
        backToCalendarBtn.addEventListener('click', slideToAppointment);

        // Contact form submission
        document.querySelector('#contactForm button[type="submit"]').addEventListener('click', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('contactName').value;
            const phone = document.getElementById('contactPhone').value;
            const questionService = document.getElementById('questionService').value;
            const otherText = document.getElementById('otherQuestionText').value;
            const message = document.getElementById('message').value;
            
            if (!name || !phone) {
                alert('Please fill in your name and phone number.');
                return;
            }
            
            const serviceLabels = {
                'custom-web-design': 'Custom Web Design', 'landing-page': 'Landing Page',
                'pwa-app': 'PWA Phone App', 'calendar': 'Calendar', 'form': 'Form',
                'free-demo': 'Free Demo', 'ad-campaign-video': 'Ad Campaign Video',
                'ad-campaign-script': 'Ad Campaign Script', 'compliance-banner': 'Compliance Banner',
                'reputation-management': 'Reputation Management', 'monthly-payments': 'Monthly Payments',
                'specials': 'Specials', 'logo': 'Logo', 'qr-code': 'QR Code',
                'other': otherText || 'Other'
            };
            
            const serviceText = questionService ? (serviceLabels[questionService] || questionService) : 'Not specified';
            const smsMessage = `WebSwan Inquiry%0AName: ${name}%0APhone: ${phone}%0AInterest: ${serviceText}%0AMessage: ${message}`;
            const smsLink = `sms:${PHONE_NUMBER}?body=${smsMessage}`;
            
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                window.location.href = smsLink;
            } else {
                alert(`📱 Send this SMS to: ${PHONE_NUMBER}\n\nMessage:\n${decodeURIComponent(smsMessage.replace(/%0A/g, '\n'))}\n\nClick OK to copy to clipboard.`);
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(decodeURIComponent(smsMessage.replace(/%0A/g, '\n'))).then(() => {
                        alert(`✅ Message copied to clipboard!\n\nYou can now paste it into your messaging app to send to ${PHONE_NUMBER}`);
                    });
                }
            }
            
            document.getElementById('contactName').value = '';
            document.getElementById('contactPhone').value = '';
            document.getElementById('questionService').value = '';
            document.getElementById('otherQuestionText').value = '';
            document.getElementById('message').value = '';
            document.getElementById('otherQuestionContainer').classList.remove('show');
            
            setTimeout(() => { slideToAppointment(); }, 1000);
        });

        // Smooth scroll for links
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a[href*="#"]');
            if (link) {
                const href = link.getAttribute('href');
                if (href.includes('#application')) {
                    e.preventDefault();
                    document.getElementById('application').scrollIntoView({ behavior: 'smooth', block: 'start' });
                    history.pushState(null, null, '#application');
                }
                if (href.includes('#appointment')) {
                    e.preventDefault();
                    slideToAppointment();
                }
                if (href.includes('#question')) {
                    e.preventDefault();
                    slideToQuestion();
                }
            }
        });

        // Initialize on load
        window.addEventListener('load', function() {
            if (window.location.hash === '#application') {
                setTimeout(() => {
                    document.getElementById('application').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
            if (window.location.hash === '#appointment') {
                setTimeout(() => { slideToAppointment(); }, 100);
            }
            if (window.location.hash === '#question') {
                setTimeout(() => { slideToQuestion(); }, 100);
            }
            
            generateTimeSlots();
            renderCalendar();
            translateFullPage('en');
        });
    </script>
</body>
</html>
